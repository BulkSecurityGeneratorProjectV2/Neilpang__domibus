<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project id="1c29d1fb-f8ae-4ddb-ac43-1469a15001ec" activeEnvironment="Default" name="TESTS_JMS" resourceRoot="" soapui-version="5.1.2-m-SNAPSHOT" abortOnError="false" runType="SEQUENTIAL" xmlns:con="http://eviware.com/soapui/config"><con:settings/><con:interface xsi:type="con:WsdlInterface" id="9581111c-248c-4085-bf9f-dc452577042f" wsaVersion="NONE" name="BackendService_1_1SoapBinding" type="wsdl" bindingName="{http://org.ecodex.backend/1_1/}BackendService_1_1SoapBinding" soapVersion="1_2" anonymous="optional" definition="http://localhost:8080/domibus/services/backend?wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart="http://localhost:8080/domibus/services/backend?wsdl"><con:part><con:url>http://localhost:8080/domibus/services/backend?wsdl</con:url><con:content><![CDATA[<wsdl:definitions name="BackendService_1_1" targetNamespace="http://org.ecodex.backend/1_1/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:tns="http://org.ecodex.backend/1_1/" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" xmlns:ns2="http://schemas.xmlsoap.org/soap/http" xmlns:ns1="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/">
  <wsdl:types>
    <xs:schema targetNamespace="http://www.w3.org/XML/1998/namespace" version="1.0" xmlns:xs="http://www.w3.org/2001/XMLSchema">
      <xs:attribute name="lang" type="xs:string"/>
    </xs:schema>
    <xs:schema targetNamespace="http://www.w3.org/2005/05/xmlmime" version="1.0" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:tns="http://www.w3.org/2005/05/xmlmime">
      <xs:complexType name="base64Binary">
        <xs:simpleContent>
          <xs:extension base="xs:base64Binary">
            <xs:attribute ref="tns:contentType"/>
          </xs:extension>
        </xs:simpleContent>
      </xs:complexType>
      <xs:complexType name="hexBinary">
        <xs:simpleContent>
          <xs:extension base="xs:string">
            <xs:attribute ref="tns:contentType"/>
          </xs:extension>
        </xs:simpleContent>
      </xs:complexType>
      <xs:attribute name="contentType" type="xs:string"/>
    </xs:schema>
    <xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://www.w3.org/2003/05/soap-envelope" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:tns="http://www.w3.org/2003/05/soap-envelope" xmlns:S12="http://www.w3.org/2003/05/soap-envelope">
      <xs:import namespace="http://www.w3.org/XML/1998/namespace"/>
      <xs:element name="Body" type="tns:Body"/>
      <xs:element name="Envelope" type="tns:Envelope"/>
      <xs:element name="Fault" type="tns:Fault"/>
      <xs:element name="Header" type="tns:Header"/>
      <xs:element name="NotUnderstood" type="tns:NotUnderstoodType"/>
      <xs:element name="Upgrade" type="tns:UpgradeType"/>
      <xs:complexType name="NotUnderstoodType">
        <xs:sequence/>
        <xs:attribute name="qname" type="xs:QName" use="required"/>
      </xs:complexType>
      <xs:complexType name="SupportedEnvType">
        <xs:sequence/>
        <xs:attribute name="qname" type="xs:QName" use="required"/>
      </xs:complexType>
      <xs:complexType name="Envelope">
        <xs:sequence>
          <xs:element minOccurs="0" name="Header" type="tns:Header"/>
          <xs:element name="Body" type="tns:Body"/>
        </xs:sequence>
        <xs:anyAttribute namespace="##other" processContents="skip"/>
      </xs:complexType>
      <xs:complexType name="Header">
        <xs:sequence>
          <xs:any maxOccurs="unbounded" minOccurs="0" namespace="##other" processContents="lax"/>
        </xs:sequence>
        <xs:anyAttribute namespace="##other" processContents="skip"/>
      </xs:complexType>
      <xs:complexType name="Body">
        <xs:sequence>
          <xs:any maxOccurs="unbounded" minOccurs="0" namespace="##other" processContents="lax"/>
        </xs:sequence>
        <xs:anyAttribute namespace="##other" processContents="skip"/>
      </xs:complexType>
      <xs:complexType name="UpgradeType">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" name="SupportedEnvelope" type="tns:SupportedEnvType"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="faultcode">
        <xs:sequence>
          <xs:element name="Value" type="xs:QName"/>
          <xs:element minOccurs="0" name="Subcode" type="tns:subcode"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="subcode">
        <xs:sequence>
          <xs:element name="Value" type="xs:QName"/>
          <xs:element minOccurs="0" name="Subcode" type="tns:subcode"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="reasontext">
        <xs:simpleContent>
          <xs:extension base="xs:string">
            <xs:attribute ref="xml:lang" use="required"/>
          </xs:extension>
        </xs:simpleContent>
      </xs:complexType>
      <xs:complexType name="faultreason">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" name="Text" type="tns:reasontext"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="detail">
        <xs:sequence>
          <xs:any maxOccurs="unbounded" minOccurs="0" namespace="##other" processContents="lax"/>
        </xs:sequence>
        <xs:anyAttribute namespace="##other" processContents="skip"/>
      </xs:complexType>
      <xs:complexType name="Fault">
        <xs:sequence>
          <xs:element name="Code" type="tns:faultcode"/>
          <xs:element name="Reason" type="tns:faultreason"/>
          <xs:element minOccurs="0" name="Node" type="xs:anyURI"/>
          <xs:element minOccurs="0" name="Role" type="xs:anyURI"/>
          <xs:element minOccurs="0" name="Detail" type="tns:detail"/>
        </xs:sequence>
      </xs:complexType>
      <xs:attribute name="mustUnderstand" type="xs:boolean"/>
    </xs:schema>
    <xs:schema targetNamespace="http://schemas.xmlsoap.org/soap/envelope/" version="1.0" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:tns="http://schemas.xmlsoap.org/soap/envelope/" xmlns:S11="http://schemas.xmlsoap.org/soap/envelope/">
      <xs:element name="Body" type="tns:Body"/>
      <xs:element name="Envelope" type="tns:Envelope"/>
      <xs:element name="Fault" type="tns:Fault"/>
      <xs:element name="Header" type="tns:Header"/>
      <xs:complexType name="Envelope">
        <xs:sequence>
          <xs:element form="qualified" minOccurs="0" name="Header" type="tns:Header"/>
          <xs:element form="qualified" name="Body" type="tns:Body"/>
          <xs:any maxOccurs="unbounded" minOccurs="0" namespace="##other" processContents="lax"/>
        </xs:sequence>
        <xs:anyAttribute namespace="##other" processContents="skip"/>
      </xs:complexType>
      <xs:complexType name="Header">
        <xs:sequence>
          <xs:any maxOccurs="unbounded" minOccurs="0" namespace="##other" processContents="lax"/>
        </xs:sequence>
        <xs:anyAttribute namespace="##other" processContents="skip"/>
      </xs:complexType>
      <xs:complexType name="Body">
        <xs:sequence>
          <xs:any maxOccurs="unbounded" minOccurs="0" namespace="##other" processContents="lax"/>
        </xs:sequence>
        <xs:anyAttribute namespace="##other" processContents="skip"/>
      </xs:complexType>
      <xs:complexType name="detail">
        <xs:sequence>
          <xs:any maxOccurs="unbounded" minOccurs="0" namespace="##other" processContents="lax"/>
        </xs:sequence>
        <xs:anyAttribute namespace="##other" processContents="skip"/>
      </xs:complexType>
      <xs:complexType name="Fault">
        <xs:sequence>
          <xs:element name="faultcode" type="xs:QName"/>
          <xs:element name="faultstring" type="xs:string"/>
          <xs:element minOccurs="0" name="faultactor" type="xs:anyURI"/>
          <xs:element minOccurs="0" name="detail" type="tns:detail"/>
        </xs:sequence>
      </xs:complexType>
    </xs:schema>
    <xs:schema attributeFormDefault="unqualified" elementFormDefault="unqualified" targetNamespace="http://org.ecodex.backend/1_1/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:ns1="http://www.w3.org/2005/05/xmlmime">
      <xs:import namespace="http://www.w3.org/2005/05/xmlmime"/>
      <xs:element name="FaultDetail">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="code" type="xs:string"/>
            <xs:element name="message" nillable="true" type="xs:string"/>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <xs:element name="downloadMessageRequest">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="messageID" type="xs:string"/>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <xs:element name="downloadMessageResponse">
        <xs:complexType>
          <xs:sequence>
            <xs:element minOccurs="0" name="bodyload" type="tns:PayloadType"/>
            <xs:element maxOccurs="unbounded" minOccurs="0" name="payload" nillable="true" type="tns:PayloadType"/>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <xs:element name="listPendingMessagesRequest" type="xs:anyType"/>
      <xs:element name="listPendingMessagesResponse">
        <xs:complexType>
          <xs:sequence>
            <xs:element maxOccurs="unbounded" minOccurs="0" name="messageID" nillable="true" type="xs:string"/>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <xs:element name="messageErrorsRequest">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="messageID" type="xs:string"/>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <xs:element name="messageStatusRequest">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="messageID" type="xs:string"/>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <xs:element name="sendRequest">
        <xs:complexType>
          <xs:sequence>
            <xs:element minOccurs="0" name="bodyload" type="tns:PayloadType"/>
            <xs:element maxOccurs="unbounded" minOccurs="0" name="payload" nillable="true" type="tns:PayloadType"/>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <xs:element name="sendRequestURL">
        <xs:complexType>
          <xs:sequence>
            <xs:element minOccurs="0" name="bodyload" type="tns:PayloadURLType"/>
            <xs:element maxOccurs="unbounded" minOccurs="0" name="payload" nillable="true" type="tns:PayloadURLType"/>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <xs:element name="sendResponse">
        <xs:complexType>
          <xs:sequence>
            <xs:element maxOccurs="unbounded" minOccurs="0" name="messageID" nillable="true" type="xs:string"/>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <xs:complexType name="PayloadType">
        <xs:simpleContent>
          <xs:extension base="ns1:base64Binary">
            <xs:attribute name="payloadId" type="xs:token" use="required"/>
          </xs:extension>
        </xs:simpleContent>
      </xs:complexType>
      <xs:complexType name="errorResultImpl">
        <xs:sequence>
          <xs:element minOccurs="0" name="errorCode" type="tns:errorCode"/>
          <xs:element minOccurs="0" name="errorDetail" type="xs:string"/>
          <xs:element minOccurs="0" name="messageInErrorId" type="xs:string"/>
          <xs:element minOccurs="0" name="mshRole" type="tns:mshRole"/>
          <xs:element minOccurs="0" name="notified" type="xs:dateTime"/>
          <xs:element minOccurs="0" name="timestamp" type="xs:dateTime"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="PayloadURLType">
        <xs:simpleContent>
          <xs:extension base="xs:string">
            <xs:attribute name="payloadId" type="xs:token" use="required"/>
          </xs:extension>
        </xs:simpleContent>
      </xs:complexType>
      <xs:simpleType name="messageStatus">
        <xs:restriction base="xs:string">
          <xs:enumeration value="READY_TO_SEND"/>
          <xs:enumeration value="SEND_ENQUEUED"/>
          <xs:enumeration value="SEND_IN_PROGRESS"/>
          <xs:enumeration value="WAITING_FOR_RECEIPT"/>
          <xs:enumeration value="ACKNOWLEDGED"/>
          <xs:enumeration value="ACKNOWLEDGED_WITH_WARNING"/>
          <xs:enumeration value="SEND_ATTEMPT_FAILED"/>
          <xs:enumeration value="SEND_FAILURE"/>
          <xs:enumeration value="NOT_FOUND"/>
          <xs:enumeration value="WAITING_FOR_RETRY"/>
          <xs:enumeration value="RECEIVED"/>
          <xs:enumeration value="RECEIVED_WITH_WARNINGS"/>
          <xs:enumeration value="DELETED"/>
        </xs:restriction>
      </xs:simpleType>
      <xs:simpleType name="errorCode">
        <xs:restriction base="xs:string">
          <xs:enumeration value="EBMS_0001"/>
          <xs:enumeration value="EBMS_0002"/>
          <xs:enumeration value="EBMS_0003"/>
          <xs:enumeration value="EBMS_0004"/>
          <xs:enumeration value="EBMS_0005"/>
          <xs:enumeration value="EBMS_0006"/>
          <xs:enumeration value="EBMS_0007"/>
          <xs:enumeration value="EBMS_0008"/>
          <xs:enumeration value="EBMS_0009"/>
          <xs:enumeration value="EBMS_0010"/>
          <xs:enumeration value="EBMS_0011"/>
          <xs:enumeration value="EBMS_0101"/>
          <xs:enumeration value="EBMS_0102"/>
          <xs:enumeration value="EBMS_0103"/>
          <xs:enumeration value="EBMS_0201"/>
          <xs:enumeration value="EBMS_0202"/>
          <xs:enumeration value="EBMS_0301"/>
          <xs:enumeration value="EBMS_0302"/>
          <xs:enumeration value="EBMS_0303"/>
          <xs:enumeration value="EBMS_0020"/>
          <xs:enumeration value="EBMS_0021"/>
          <xs:enumeration value="EBMS_0022"/>
          <xs:enumeration value="EBMS_0023"/>
          <xs:enumeration value="EBMS_0030"/>
          <xs:enumeration value="EBMS_0031"/>
          <xs:enumeration value="EBMS_0040"/>
          <xs:enumeration value="EBMS_0041"/>
          <xs:enumeration value="EBMS_0042"/>
          <xs:enumeration value="EBMS_0043"/>
          <xs:enumeration value="EBMS_0044"/>
          <xs:enumeration value="EBMS_0045"/>
          <xs:enumeration value="EBMS_0046"/>
          <xs:enumeration value="EBMS_0047"/>
          <xs:enumeration value="EBMS_0048"/>
          <xs:enumeration value="EBMS_0049"/>
          <xs:enumeration value="EBMS_0050"/>
          <xs:enumeration value="EBMS_0051"/>
          <xs:enumeration value="EBMS_0052"/>
          <xs:enumeration value="EBMS_0053"/>
          <xs:enumeration value="EBMS_0054"/>
          <xs:enumeration value="EBMS_0055"/>
          <xs:enumeration value="EBMS_0060"/>
          <xs:enumeration value="EBMS_0065"/>
        </xs:restriction>
      </xs:simpleType>
      <xs:simpleType name="mshRole">
        <xs:restriction base="xs:string">
          <xs:enumeration value="SENDING"/>
          <xs:enumeration value="RECEIVING"/>
        </xs:restriction>
      </xs:simpleType>
      <xs:complexType final="#all" name="errorResultImplArray">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="item" nillable="true" type="tns:errorResultImpl"/>
        </xs:sequence>
      </xs:complexType>
      <xs:element name="getStatusRequest" nillable="true">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="messageID" type="xs:string"/>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <xs:element name="getMessageStatusResponse" nillable="true" type="tns:messageStatus"/>
      <xs:element name="getErrorsRequest" nillable="true">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="messageID" type="xs:string"/>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <xs:element name="getMessageErrorsResponse" nillable="true" type="tns:errorResultImplArray"/>
    </xs:schema>
    <xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:tns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:ns1="http://www.w3.org/2003/05/soap-envelope" xmlns:eb="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/">
      <xs:import namespace="http://www.w3.org/2003/05/soap-envelope"/>
      <xs:import namespace="http://www.w3.org/XML/1998/namespace"/>
      <xs:element name="Messaging" type="tns:Messaging"/>
      <xs:element name="UserMessage" type="tns:UserMessage"/>
      <xs:complexType name="Messaging">
        <xs:sequence>
          <xs:element minOccurs="0" name="SignalMessage" type="tns:SignalMessage"/>
          <xs:element minOccurs="0" name="UserMessage" type="tns:UserMessage"/>
          <xs:any maxOccurs="unbounded" minOccurs="0" namespace="##other" processContents="lax"/>
        </xs:sequence>
        <xs:attribute name="id" type="xs:ID"/>
        <xs:attribute ref="ns1:mustUnderstand"/>
        <xs:anyAttribute namespace="##other" processContents="skip"/>
      </xs:complexType>
      <xs:complexType name="SignalMessage">
        <xs:sequence>
          <xs:element name="MessageInfo" type="tns:MessageInfo"/>
          <xs:element minOccurs="0" name="PullRequest" type="tns:PullRequest"/>
          <xs:element minOccurs="0" name="Receipt" type="tns:Receipt"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="Error" type="tns:Error"/>
          <xs:any maxOccurs="unbounded" minOccurs="0" namespace="##other" processContents="lax"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="MessageInfo">
        <xs:sequence>
          <xs:element name="Timestamp" type="xs:dateTime"/>
          <xs:element name="MessageId" type="xs:string"/>
          <xs:element minOccurs="0" name="RefToMessageId" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="PullRequest">
        <xs:sequence>
          <xs:any maxOccurs="unbounded" minOccurs="0" namespace="##other" processContents="lax"/>
        </xs:sequence>
        <xs:attribute name="mpc" type="xs:anyURI"/>
        <xs:anyAttribute namespace="##other" processContents="skip"/>
      </xs:complexType>
      <xs:complexType name="Service">
        <xs:simpleContent>
          <xs:extension base="xs:string">
            <xs:attribute name="type" type="xs:string"/>
          </xs:extension>
        </xs:simpleContent>
      </xs:complexType>
      <xs:complexType name="PartyId">
        <xs:simpleContent>
          <xs:extension base="xs:string">
            <xs:attribute name="type" type="xs:string"/>
          </xs:extension>
        </xs:simpleContent>
      </xs:complexType>
      <xs:complexType name="Schema">
        <xs:sequence/>
        <xs:attribute name="location" type="xs:anyURI" use="required"/>
        <xs:attribute name="version" type="xs:string"/>
        <xs:attribute name="namespace" type="xs:string"/>
      </xs:complexType>
      <xs:complexType name="To">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" name="PartyId" type="tns:PartyId"/>
          <xs:element default="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/defaultRole" name="Role" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="Error">
        <xs:sequence>
          <xs:element minOccurs="0" name="Description" type="tns:Description"/>
          <xs:element minOccurs="0" name="ErrorDetail" type="xs:token"/>
        </xs:sequence>
        <xs:attribute name="category" type="xs:token"/>
        <xs:attribute name="refToMessageInError" type="xs:token"/>
        <xs:attribute name="errorCode" type="xs:token" use="required"/>
        <xs:attribute name="origin" type="xs:token"/>
        <xs:attribute name="severity" type="xs:token" use="required"/>
        <xs:attribute name="shortDescription" type="xs:token"/>
      </xs:complexType>
      <xs:complexType name="Description">
        <xs:simpleContent>
          <xs:extension base="xs:string">
            <xs:attribute ref="xml:lang" use="required"/>
          </xs:extension>
        </xs:simpleContent>
      </xs:complexType>
      <xs:complexType name="Receipt">
        <xs:sequence>
          <xs:any namespace="##other" processContents="skip"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="CollaborationInfo">
        <xs:sequence>
          <xs:element minOccurs="0" name="AgreementRef" type="tns:AgreementRef"/>
          <xs:element name="Service" type="tns:Service"/>
          <xs:element name="Action" type="xs:token"/>
          <xs:element name="ConversationId" type="xs:token"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="AgreementRef">
        <xs:simpleContent>
          <xs:extension base="xs:string">
            <xs:attribute name="type" type="xs:string"/>
            <xs:attribute name="pmode" type="xs:string"/>
          </xs:extension>
        </xs:simpleContent>
      </xs:complexType>
      <xs:complexType name="MessageProperties">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" name="Property" type="tns:Property"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="Property">
        <xs:simpleContent>
          <xs:extension base="xs:string">
            <xs:attribute name="name" type="xs:string" use="required"/>
            <xs:attribute name="type" type="xs:string"/>
          </xs:extension>
        </xs:simpleContent>
      </xs:complexType>
      <xs:complexType name="From">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" name="PartyId" type="tns:PartyId"/>
          <xs:element default="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/defaultRole" name="Role" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="PartProperties">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" name="Property" type="tns:Property"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="PartyInfo">
        <xs:sequence>
          <xs:element name="From" type="tns:From"/>
          <xs:element name="To" type="tns:To"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="PayloadInfo">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" name="PartInfo" type="tns:PartInfo"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="PartInfo">
        <xs:sequence>
          <xs:element minOccurs="0" name="Schema" type="tns:Schema"/>
          <xs:element minOccurs="0" name="Description" type="tns:Description"/>
          <xs:element minOccurs="0" name="PartProperties" type="tns:PartProperties"/>
        </xs:sequence>
        <xs:attribute name="href" type="xs:token"/>
      </xs:complexType>
      <xs:complexType name="UserMessage">
        <xs:sequence>
          <xs:element name="MessageInfo" type="tns:MessageInfo"/>
          <xs:element name="PartyInfo" type="tns:PartyInfo"/>
          <xs:element name="CollaborationInfo" type="tns:CollaborationInfo"/>
          <xs:element minOccurs="0" name="MessageProperties" type="tns:MessageProperties"/>
          <xs:element minOccurs="0" name="PayloadInfo" type="tns:PayloadInfo"/>
        </xs:sequence>
        <xs:attribute name="mpc" type="xs:anyURI"/>
      </xs:complexType>
    </xs:schema>
  </wsdl:types>
  <wsdl:message name="getMessageErrors">
    <wsdl:part element="tns:getErrorsRequest" name="getErrorsRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="downloadMessage">
    <wsdl:part element="tns:downloadMessageRequest" name="downloadMessageRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="DownloadMessageFault">
    <wsdl:part element="tns:FaultDetail" name="DownloadMessageFault"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="downloadMessageResponse">
    <wsdl:part element="tns:downloadMessageResponse" name="downloadMessageResponse"></wsdl:part>
    <wsdl:part element="ns1:Messaging" name="ebMSHeaderInfo"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="listPendingMessagesResponse">
    <wsdl:part element="tns:listPendingMessagesResponse" name="listPendingMessagesResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getMessageStatusResponse">
    <wsdl:part element="tns:getMessageStatusResponse" name="getMessageStatusResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="listPendingMessages">
    <wsdl:part element="tns:listPendingMessagesRequest" name="listPendingMessagesRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getMessageStatus">
    <wsdl:part element="tns:getStatusRequest" name="getStatusRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="sendMessageResponse">
    <wsdl:part element="tns:sendResponse" name="sendResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="sendMessage">
    <wsdl:part element="tns:sendRequest" name="sendRequest"></wsdl:part>
    <wsdl:part element="ns1:Messaging" name="ebMSHeaderInfo"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="SendMessageFault">
    <wsdl:part element="tns:FaultDetail" name="SendMessageFault"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getMessageErrorsResponse">
    <wsdl:part element="tns:getMessageErrorsResponse" name="getMessageErrorsResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:portType name="BackendInterface">
    <wsdl:operation name="sendMessage">
      <wsdl:input message="tns:sendMessage" name="sendMessage"></wsdl:input>
      <wsdl:output message="tns:sendMessageResponse" name="sendMessageResponse"></wsdl:output>
      <wsdl:fault message="tns:SendMessageFault" name="SendMessageFault"></wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="getMessageStatus">
      <wsdl:input message="tns:getMessageStatus" name="getMessageStatus"></wsdl:input>
      <wsdl:output message="tns:getMessageStatusResponse" name="getMessageStatusResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="listPendingMessages">
      <wsdl:input message="tns:listPendingMessages" name="listPendingMessages"></wsdl:input>
      <wsdl:output message="tns:listPendingMessagesResponse" name="listPendingMessagesResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getMessageErrors">
      <wsdl:input message="tns:getMessageErrors" name="getMessageErrors"></wsdl:input>
      <wsdl:output message="tns:getMessageErrorsResponse" name="getMessageErrorsResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="downloadMessage" parameterOrder="downloadMessageRequest downloadMessageResponse ebMSHeaderInfo">
      <wsdl:input message="tns:downloadMessage" name="downloadMessage"></wsdl:input>
      <wsdl:output message="tns:downloadMessageResponse" name="downloadMessageResponse"></wsdl:output>
      <wsdl:fault message="tns:DownloadMessageFault" name="DownloadMessageFault"></wsdl:fault>
    </wsdl:operation>
  </wsdl:portType>
  <wsdl:binding name="BackendService_1_1SoapBinding" type="tns:BackendInterface">
    <soap12:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    <wsdl:operation name="sendMessage">
      <soap12:operation soapAction="" style="document"/>
      <wsdl:input name="sendMessage">
        <soap12:header message="tns:sendMessage" part="ebMSHeaderInfo" use="literal"></soap12:header>
        <soap12:body parts="sendRequest" use="literal"/>
      </wsdl:input>
      <wsdl:output name="sendMessageResponse">
        <soap12:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="SendMessageFault">
        <soap12:fault name="SendMessageFault" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="getMessageStatus">
      <soap12:operation soapAction="" style="document"/>
      <wsdl:input name="getMessageStatus">
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="getMessageStatusResponse">
        <soap12:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getMessageErrors">
      <soap12:operation soapAction="" style="document"/>
      <wsdl:input name="getMessageErrors">
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="getMessageErrorsResponse">
        <soap12:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="listPendingMessages">
      <soap12:operation soapAction="" style="document"/>
      <wsdl:input name="listPendingMessages">
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="listPendingMessagesResponse">
        <soap12:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="downloadMessage">
      <soap12:operation soapAction="" style="document"/>
      <wsdl:input name="downloadMessage">
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="downloadMessageResponse">
        <soap12:header message="tns:downloadMessageResponse" part="ebMSHeaderInfo" use="literal"></soap12:header>
        <soap12:body parts="downloadMessageResponse" use="literal"/>
      </wsdl:output>
      <wsdl:fault name="DownloadMessageFault">
        <soap12:fault name="DownloadMessageFault" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:service name="BackendService_1_1">
    <wsdl:port binding="tns:BackendService_1_1SoapBinding" name="BACKEND_PORT">
      <soap12:address location="http://localhost:8080/domibus/services/backend"/>
    </wsdl:port>
  </wsdl:service>
</wsdl:definitions>]]></con:content><con:type>http://schemas.xmlsoap.org/wsdl/</con:type></con:part></con:definitionCache><con:endpoints><con:endpoint>http://localhost:8080/domibus/services/backend</con:endpoint></con:endpoints><con:operation id="dc567009-e72d-4167-9ec7-fe2ac1738684" isOneWay="false" action="" name="downloadMessage" bindingOperationName="downloadMessage" type="Request-Response" outputName="downloadMessageResponse" inputName="downloadMessage" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation id="767cb481-8b7d-45ef-957f-e823696a27be" isOneWay="false" action="" name="getMessageErrors" bindingOperationName="getMessageErrors" type="Request-Response" outputName="getMessageErrorsResponse" inputName="getMessageErrors" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation id="95ae55fb-b5a3-4575-94c9-44c3dedf1981" isOneWay="false" action="" name="getMessageStatus" bindingOperationName="getMessageStatus" type="Request-Response" outputName="getMessageStatusResponse" inputName="getMessageStatus" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation id="f3563058-db2b-4135-a5e0-ddcfb8386683" isOneWay="false" action="" name="listPendingMessages" bindingOperationName="listPendingMessages" type="Request-Response" outputName="listPendingMessagesResponse" inputName="listPendingMessages" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation><con:operation id="3fe9115c-da9f-495b-90c5-4efabf0c9fa2" isOneWay="false" action="" name="sendMessage" bindingOperationName="sendMessage" type="Request-Response" outputName="sendMessageResponse" inputName="sendMessage" receivesAttachments="false" sendsAttachments="false"><con:settings/></con:operation></con:interface><con:testSuite id="aa1cfbec-dd7a-433f-af0c-5a2b5f7170d5" name="Administration"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Clean Database" searchProperties="true" id="d5b6ea15-c3c6-4356-83de-7f9bf1a1248c">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Clean All" id="6c74f07e-6da7-4447-ae25-51f802331812"><con:settings/><con:config><script>def test = new Domibus(log,null,context);
test.cleanDatabaseAll();
test.finalize();

</script></con:config></con:testStep><con:tearDownScript>ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="e17c4543-f73c-41bf-af7a-4e67d0878b87" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Add or change Teardown script" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AddToTearDown" id="3e364433-d358-424b-9d18-6fea08b81bd7"><con:settings/><con:config><script>def lineToAdd = "ExcelReporting.reportTestCase(testRunner, log)"
log.info "START: Amendment tear down sciprts"
testRunner.testCase.testSuite.project.getTestSuiteList().each { testSuite ->
	testSuite.getTestCaseList().each { testCase ->
 		def td = testCase.getTearDownScript()
  		if (td == null) 
  		{
  			testCase.setTearDownScript(lineToAdd)
  		}
  		else if(!td.contains("ExcelReporting.reportTestCase")) {
  			def newTearDown = td + System.getProperty("line.separator") + lineToAdd
  			testCase.setTearDownScript(newTearDown)
  		}
 	}
 }
log.info "END: Amendment tear down sciprts"
</script></con:config></con:testStep><con:testStep type="groovy" name="ReplaceTearDownLine" id="8c1c0eb5-fce0-4361-9cae-51e253bf1a8b"><con:settings/><con:config><script>def newLine = System.getProperty("line.separator")
def oldLineToBeChanged = /(?&lt;!\/)ExcelReporting.reportTestCase/

def newLineToBeChanged = "//ExcelReporting.reportTestCase"

log.info "START: Amend tear down scripts"
testRunner.testCase.testSuite.project.getTestSuiteList().each { testSuite ->
	testSuite.getTestCaseList().each { testCase ->
 		def tdScript = testCase.getTearDownScript()
  		if (tdScript != null) {			
  			testCase.setTearDownScript( tdScript.replaceAll(oldLineToBeChanged, newLineToBeChanged) )
  		}
 	}
 }</script></con:config></con:testStep><con:tearDownScript>ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/><con:reportParameters/></con:testCase><con:testCase id="345e9590-4a08-4389-8097-a75429e3ad63" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Start default configuration" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Start Blue and Red" id="7c98a92a-048f-4506-b397-07ae4d42c73e"><con:settings/><con:config><script>Domibus.startMSH("sender", context, log);
Domibus.startMSH("receiver", context, log);
</script></con:config></con:testStep><con:testStep type="delay" name="Delay" id="97ef235b-6691-443d-87f0-b0e2f0d89c8c"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="httprequest" name="Upload P-Mode blue default" id="cfc39d54-2c34-4cca-91c1-ba193f65c210"><con:settings/><con:config method="POST" xsi:type="con:HttpRequest" id="7d8d7688-62d8-485a-9855-44e191f83832" name="Upload P-Mode blue default" postQueryString="false" mediaType="multipart/form-data" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding/><con:endpoint>${#Project#localUrl}/home/uploadPmodeFile</con:endpoint><con:request/><con:assertion type="Simple Contains" id="8749654b-1ee8-45da-8cec-2a1ecee56828" name="Contains"><con:configuration><token>PMode file has been successfully uploaded</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="51edc8a0-5041-497e-9abd-1377274bf503" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:username>admin</con:username><con:password>123456</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:attachment><con:name>domibus-gw-sample-pmode-blue.xml</con:name><con:contentType>text/xml</con:contentType><con:contentId>pmode</con:contentId><con:url>${#Project#defaultPModesPath}/blue/domibus-gw-sample-pmode-blue.xml</con:url><con:id>452ff68f-c6fb-4006-9ffd-15741474dc99</con:id></con:attachment><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="Upload P-Mode red default" id="dce02424-dbb3-4348-a809-32b4f8af4e0b"><con:settings/><con:config method="POST" xsi:type="con:HttpRequest" id="7d8d7688-62d8-485a-9855-44e191f83832" name="Upload P-Mode red default" postQueryString="false" mediaType="multipart/form-data" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding/><con:endpoint>${#Project#remoteUrl}/home/uploadPmodeFile</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" id="e8d073e0-a5e8-4934-a3c4-fce5cf677033" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="ee0a9716-f73d-41f3-90b3-1cba230211c1" name="Contains"><con:configuration><token>PMode file has been successfully uploaded</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username>admin</con:username><con:password>123456</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:attachment><con:name>domibus-gw-sample-pmode-blue.xml</con:name><con:contentType>text/xml</con:contentType><con:contentId>pmode</con:contentId><con:part xsi:nil="true"/><con:url>${#Project#defaultPModesPath}/red/domibus-gw-sample-pmode-red.xml</con:url><con:id>2836aa1f-ae95-4661-a5f8-a2c598bbbe8e</con:id></con:attachment><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="Upload keystore blue default" id="21313fd8-7520-4a73-8fc3-3c10bdf08d08"><con:settings/><con:config method="POST" xsi:type="con:HttpRequest" id="61ffe2a5-f284-4dec-b84a-9a82c84c99b1" name="Upload keystore blue default" postQueryString="false" mediaType="multipart/form-data" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding/><con:endpoint>${#Project#localUrl}/home/uploadTruststoreFile</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" id="e4604d4b-7e98-4621-89f0-a412aa38c723" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c88bcac2-185f-4d9e-9c3d-17e0f66703d7" name="Contains"><con:configuration><token>Truststore file has been successfully replaced</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username>admin</con:username><con:password>123456</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:attachment><con:name>gateway_truststore.jks</con:name><con:contentType>application/octet-stream</con:contentType><con:contentId>truststore</con:contentId><con:part xsi:nil="true"/><con:url>${#Project#defaultPModesPath}/blue/gateway_truststore.jks</con:url><con:id>84332a2d-17ce-4a76-aced-0c1a597eba74</con:id></con:attachment><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><con:parameter><con:name>password</con:name><con:value>test123</con:value><con:style>QUERY</con:style></con:parameter></con:parameters></con:config></con:testStep><con:testStep type="httprequest" name="Upload keystore red default" id="1219a664-0bee-4e12-a41b-37e96921686a"><con:settings/><con:config method="POST" xsi:type="con:HttpRequest" id="61ffe2a5-f284-4dec-b84a-9a82c84c99b1" name="Upload keystore red default" postQueryString="false" mediaType="multipart/form-data" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding/><con:endpoint>${#Project#remoteUrl}/home/uploadTruststoreFile</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" id="970a3313-ddee-463b-af9d-62508a0fbca0" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="a2555732-8579-4aca-85c6-3e0b9fc6fa76" name="Contains"><con:configuration><token>Truststore file has been successfully replaced</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username>admin</con:username><con:password>123456</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:attachment><con:name>gateway_truststore.jks</con:name><con:contentType>application/octet-stream</con:contentType><con:contentId>truststore</con:contentId><con:part xsi:nil="true"/><con:url>${#Project#defaultPModesPath}/red/gateway_truststore.jks</con:url><con:id>84332a2d-17ce-4a76-aced-0c1a597eba74</con:id></con:attachment><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><con:parameter><con:name>password</con:name><con:value>test123</con:value><con:style>QUERY</con:style></con:parameter></con:parameters></con:config></con:testStep><con:testStep type="httprequest" name="Update Message Filter on blue To Jms" id="04336559-b15a-4b83-8eff-b26ab9b878e0"><con:settings/><con:config method="POST" xsi:type="con:HttpRequest" id="cfa93119-5c7e-4a91-859d-4de94b246f24" name="Update Message Filter on blue To Jms" postQueryString="false" mediaType="multipart/form-data" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#localUrl}/home/messagefilter</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" id="933ea433-d501-4a4f-aa8f-a6c1f95159ea" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="17919e6c-0b28-4bf5-a8b3-9f92f5118deb" name="Contains"><con:configuration><token>Filters updated</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username>admin</con:username><con:password>123456</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><con:parameter><con:name>backends</con:name><con:value>Jms</con:value><con:style>QUERY</con:style></con:parameter><con:parameter><con:name>backends</con:name><con:value>backendWebservice</con:value><con:style>QUERY</con:style></con:parameter></con:parameters></con:config></con:testStep><con:testStep type="httprequest" name="Update Message Filter on red To Jms" id="14e8b88e-4886-4272-b64e-bf825933e405"><con:settings/><con:config method="POST" xsi:type="con:HttpRequest" id="cfa93119-5c7e-4a91-859d-4de94b246f24" name="Update Message Filter on red To Jms" postQueryString="false" mediaType="multipart/form-data" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#remoteUrl}/home/messagefilter</con:endpoint><con:request/><con:assertion type="Simple Contains" id="c906ca68-35ee-4588-8098-aa81b4f1e7ad" name="Contains"><con:configuration><token>Filters updated</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="20b3f5b6-1bb1-4638-acaa-a269513ff267" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:username>admin</con:username><con:password>123456</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><con:parameter><con:name>backends</con:name><con:value>Jms</con:value><con:style>QUERY</con:style></con:parameter><con:parameter><con:name>backends</con:name><con:value>backendWebservice</con:value><con:style>QUERY</con:style></con:parameter></con:parameters></con:config></con:testStep><con:tearDownScript/><con:properties/><con:reportParameters/></con:testCase><con:testCase id="95e59973-5ed1-444f-870d-fa9c15f35c98" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Start 3 gateways configuration" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Start gateways" id="5f3b8ff7-d3c2-42b9-b81a-a98bb5936548"><con:settings/><con:config><script>Domibus.startMSH("sender", context, log);
Domibus.startMSH("receiver", context, log);
Domibus.startMSH("receivergreen", context, log);
</script></con:config></con:testStep><con:testStep type="delay" name="Delay" id="4b9006a0-2454-4f2d-99a6-ef1810201a3d"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="httprequest" name="Upload P-Mode blue swedish" id="c4aba088-64a4-4b68-8225-8cf920ba683b"><con:settings/><con:config method="POST" xsi:type="con:HttpRequest" id="7d8d7688-62d8-485a-9855-44e191f83832" name="Upload P-Mode blue swedish" postQueryString="false" mediaType="multipart/form-data" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding/><con:endpoint>${#Project#localUrl}/home/uploadPmodeFile</con:endpoint><con:request/><con:assertion type="Simple Contains" id="8749654b-1ee8-45da-8cec-2a1ecee56828" name="Contains"><con:configuration><token>PMode file has been successfully uploaded</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="51edc8a0-5041-497e-9abd-1377274bf503" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:username>admin</con:username><con:password>123456</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:attachment><con:name>domibus-gw-sample-pmode-blue.xml</con:name><con:contentType>text/xml</con:contentType><con:contentId>pmode</con:contentId><con:url>${#Project#specialPModesPath}/ThreegatewaysTestsPModesandKeystores/blue/domibus-gw-sample-pmode-blue.xml</con:url><con:id>452ff68f-c6fb-4006-9ffd-15741474dc99</con:id></con:attachment><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="Upload P-Mode red swedish" id="dd2f0255-9fbf-4fd5-9f8d-3bc30143eaa4"><con:settings/><con:config method="POST" xsi:type="con:HttpRequest" id="7d8d7688-62d8-485a-9855-44e191f83832" name="Upload P-Mode red swedish" postQueryString="false" mediaType="multipart/form-data" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding/><con:endpoint>${#Project#remoteUrl}/home/uploadPmodeFile</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" id="e8d073e0-a5e8-4934-a3c4-fce5cf677033" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="ee0a9716-f73d-41f3-90b3-1cba230211c1" name="Contains"><con:configuration><token>PMode file has been successfully uploaded</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username>admin</con:username><con:password>123456</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:attachment><con:name>domibus-gw-sample-pmode-blue.xml</con:name><con:contentType>text/xml</con:contentType><con:contentId>pmode</con:contentId><con:part xsi:nil="true"/><con:url>${#Project#specialPModesPath}/ThreegatewaysTestsPModesandKeystores/red/domibus-gw-sample-pmode-red.xml</con:url><con:id>2836aa1f-ae95-4661-a5f8-a2c598bbbe8e</con:id></con:attachment><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="Upload P-Mode green swedish" id="779e2d9c-adfb-44f8-bec3-1fadd79538de"><con:settings/><con:config method="POST" xsi:type="con:HttpRequest" id="7d8d7688-62d8-485a-9855-44e191f83832" name="Upload P-Mode green swedish" postQueryString="false" mediaType="multipart/form-data" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding/><con:endpoint>${#Project#greenUrl}/home/uploadpmodefile</con:endpoint><con:request/><con:credentials><con:username>admin</con:username><con:password>123456</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:attachment><con:name>domibus-gw-sample-pmode-blue.xml</con:name><con:contentType>text/xml</con:contentType><con:contentId>pmode</con:contentId><con:part xsi:nil="true"/><con:url>${#Project#specialPModesPath}/ThreegatewaysTestsPModesandKeystores/green/PMode-domibus-green.xml</con:url><con:id>2836aa1f-ae95-4661-a5f8-a2c598bbbe8e</con:id></con:attachment><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="Upload keystore blue swedish" id="f1fb0400-2e47-487a-af61-e0c7ea5e7d67"><con:settings/><con:config method="POST" xsi:type="con:HttpRequest" id="61ffe2a5-f284-4dec-b84a-9a82c84c99b1" name="Upload keystore blue swedish" postQueryString="false" mediaType="multipart/form-data" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding/><con:endpoint>${#Project#localUrl}/home/uploadTruststoreFile</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" id="e4604d4b-7e98-4621-89f0-a412aa38c723" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c88bcac2-185f-4d9e-9c3d-17e0f66703d7" name="Contains"><con:configuration><token>Truststore file has been successfully replaced</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username>admin</con:username><con:password>123456</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:attachment><con:name>gateway_truststore.jks</con:name><con:contentType>application/octet-stream</con:contentType><con:contentId>truststore</con:contentId><con:part xsi:nil="true"/><con:url>${#Project#specialPModesPath}/ThreegatewaysTestsPModesandKeystores/blue/gateway_truststore.jks</con:url><con:id>84332a2d-17ce-4a76-aced-0c1a597eba74</con:id></con:attachment><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><con:parameter><con:name>password</con:name><con:value>test123</con:value><con:style>QUERY</con:style></con:parameter></con:parameters></con:config></con:testStep><con:testStep type="httprequest" name="Upload keystore red swedish" id="1bd5517f-10b5-4d90-bd03-45b993d6ab03"><con:settings/><con:config method="POST" xsi:type="con:HttpRequest" id="61ffe2a5-f284-4dec-b84a-9a82c84c99b1" name="Upload keystore red swedish" postQueryString="false" mediaType="multipart/form-data" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding/><con:endpoint>${#Project#remoteUrl}/home/uploadTruststoreFile</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" id="970a3313-ddee-463b-af9d-62508a0fbca0" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="a2555732-8579-4aca-85c6-3e0b9fc6fa76" name="Contains"><con:configuration><token>Truststore file has been successfully replaced</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username>admin</con:username><con:password>123456</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:attachment><con:name>gateway_truststore.jks</con:name><con:contentType>application/octet-stream</con:contentType><con:contentId>truststore</con:contentId><con:part xsi:nil="true"/><con:url>${#Project#specialPModesPath}/ThreegatewaysTestsPModesandKeystores/red/gateway_truststore.jks</con:url><con:id>84332a2d-17ce-4a76-aced-0c1a597eba74</con:id></con:attachment><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><con:parameter><con:name>password</con:name><con:value>test123</con:value><con:style>QUERY</con:style></con:parameter></con:parameters></con:config></con:testStep><con:testStep type="httprequest" name="Upload keystore green swedish" id="2d533364-0c89-4526-ab37-4c725ba8d50e"><con:settings/><con:config method="POST" xsi:type="con:HttpRequest" id="61ffe2a5-f284-4dec-b84a-9a82c84c99b1" name="Upload keystore green swedish" postQueryString="false" mediaType="multipart/form-data" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding/><con:endpoint>${#Project#greenUrl}/home/uploadTruststoreFile</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" id="970a3313-ddee-463b-af9d-62508a0fbca0" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="a2555732-8579-4aca-85c6-3e0b9fc6fa76" name="Contains"><con:configuration><token>Truststore file has been successfully replaced</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username>admin</con:username><con:password>123456</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:attachment><con:name>gateway_truststore.jks</con:name><con:contentType>application/octet-stream</con:contentType><con:contentId>truststore</con:contentId><con:part xsi:nil="true"/><con:url>${#Project#specialPModesPath}/ThreegatewaysTestsPModesandKeystores/green/gateway_truststore.jks</con:url><con:id>84332a2d-17ce-4a76-aced-0c1a597eba74</con:id></con:attachment><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><con:parameter><con:name>password</con:name><con:value>test123</con:value><con:style>QUERY</con:style></con:parameter></con:parameters></con:config></con:testStep><con:testStep type="httprequest" name="Update Message Filter on blue To Jms" id="d5e4be77-2b1b-4d4b-9c87-38a54e7c4dfd"><con:settings/><con:config method="POST" xsi:type="con:HttpRequest" id="cfa93119-5c7e-4a91-859d-4de94b246f24" name="Update Message Filter on blue To Jms" postQueryString="false" mediaType="multipart/form-data" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#localUrl}/home/messagefilter</con:endpoint><con:request/><con:assertion type="Simple Contains" id="28a7eab3-f112-4a40-b399-404bce46a802" name="Contains"><con:configuration><token>Filters updated</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="eb28ceb6-1093-44bd-a751-7461fcb328cb" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:username>admin</con:username><con:password>123456</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><con:parameter><con:name>backends</con:name><con:value>Jms</con:value><con:style>QUERY</con:style></con:parameter><con:parameter><con:name>backends</con:name><con:value>backendWebservice</con:value><con:style>QUERY</con:style></con:parameter></con:parameters></con:config></con:testStep><con:testStep type="httprequest" name="Update Message Filter on red To Jms" id="8175c24e-593e-4a30-abc5-0d41063929b3"><con:settings/><con:config method="POST" xsi:type="con:HttpRequest" id="cfa93119-5c7e-4a91-859d-4de94b246f24" name="Update Message Filter on red To Jms" postQueryString="false" mediaType="multipart/form-data" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#remoteUrl}/home/messagefilter</con:endpoint><con:request/><con:assertion type="Simple Contains" id="6a00dced-3e7d-4ee3-91d9-635d9b44ceb9" name="Contains"><con:configuration><token>Filters updated</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="2b4a482b-ca17-419b-ae20-3f8690cf9b4f" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:username>admin</con:username><con:password>123456</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><con:parameter><con:name>backends</con:name><con:value>Jms</con:value><con:style>QUERY</con:style></con:parameter><con:parameter><con:name>backends</con:name><con:value>backendWebservice</con:value><con:style>QUERY</con:style></con:parameter></con:parameters></con:config></con:testStep><con:testStep type="httprequest" name="Update Message Filter on green To Jms" id="09b6b6be-b00c-4389-b82e-27407dd39c99"><con:settings/><con:config method="POST" xsi:type="con:HttpRequest" id="cfa93119-5c7e-4a91-859d-4de94b246f24" name="Update Message Filter on green To Jms" postQueryString="false" mediaType="multipart/form-data" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#greenUrl}/home/messagefilter</con:endpoint><con:request/><con:assertion type="Simple Contains" id="a0de686d-b41f-4139-ab9d-3ecf81d290de" name="Contains"><con:configuration><token>Filters updated</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="24425afd-2aa9-42de-85e4-7ecf2f1b76cc" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:username>admin</con:username><con:password>123456</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><con:parameter><con:name>backends</con:name><con:value>Jms</con:value><con:style>QUERY</con:style></con:parameter><con:parameter><con:name>backends</con:name><con:value>backendWebservice</con:value><con:style>QUERY</con:style></con:parameter></con:parameters></con:config></con:testStep><con:tearDownScript/><con:properties/><con:reportParameters/></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom001-Test Case only for checking reporting function" searchProperties="true" id="af8e4a35-9653-4e63-b2b6-d7aef7827425" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" disabled="true">
            <con:settings/>
            <con:testStep type="request" name="Submit Message" id="70ab0c72-d40f-4a19-bfc3-7cc68831c197">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>BackendService_1_1SoapBinding</con:interface>
                    <con:operation>sendMessage</con:operation>
                    <con:request name="Submit Message" id="7dc400ff-4173-4c4b-9146-54bd15cee994">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>${#Project#localUrl}/services/backend</con:endpoint>
                        <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:sendRequest>
         <payload payloadId="cid:message">PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</payload>
      </_1:sendRequest>
   </soap:Body>
</soap:Envelope>
]]></con:request><con:assertion type="SOAP Response" id="3a65a26d-664a-40b6-9237-8cfd66c7c2db"/><con:assertion type="SOAP Fault Assertion" id="d3b2a875-2c73-4b67-a8c8-f45848cb70da" name="Not SOAP Fault"/><con:assertion type="XPath Match" id="f0667722-516b-4a0c-ba90-e95409275f02" name="XPath Match"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="c8a24d36-ed80-46f7-90dd-1c94f468ce2d" name="Script Assertion"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep>
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" name="Test Request" id="bad9a6ff-ce6a-464f-a1d3-5b4be22ac290" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>downloadMessage</con:operation><con:request name="Test Request" id="cb41a9c6-673e-462f-8379-d97950ffa55c"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:downloadMessageRequest>\r
         <!--type: max255-non-empty-string-->\r
         <messageID>gero et</messageID>\r
      </_1:downloadMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="77d2dada-1fab-47c0-b441-76c1fd9e9294"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Copy of Submit Message" id="9110cd33-cc43-4e43-9c0b-e0a774a10b4d">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>BackendService_1_1SoapBinding</con:interface>
                    <con:operation>sendMessage</con:operation>
                    <con:request name="Copy of Submit Message" id="7dc400ff-4173-4c4b-9146-54bd15cee994">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>${#Project#localUrl}/services/backend</con:endpoint>
                        <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:sendRequest>
         <payload payloadId="cid:message">PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</payload>
      </_1:sendRequest>
   </soap:Body>
</soap:Envelope>
]]></con:request><con:assertion type="SOAP Response" id="3a65a26d-664a-40b6-9237-8cfd66c7c2db"/><con:assertion type="SOAP Fault Assertion" id="d3b2a875-2c73-4b67-a8c8-f45848cb70da" name="Not SOAP Fault"/><con:assertion type="XPath Match" id="f0667722-516b-4a0c-ba90-e95409275f02" name="XPath Match"><con:configuration><path>exists(//messageID)</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="c8a24d36-ed80-46f7-90dd-1c94f468ce2d" name="Script Assertion"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("RECEIVED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script" id="9ec3f341-f59a-4d60-b50d-747fb9c2736a"><con:settings/><con:config><script>assert (1==1) </script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script 1" id="c25cc1ad-1321-410a-aef9-11279fb4ffbd"><con:settings/><con:config><script>assert false : "It didn't work"</script></con:config></con:testStep><con:testStep type="request" name="Copy of Copy of Submit Message" id="fdd242a0-f45f-4cf2-9ded-81de987cf4b1">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>BackendService_1_1SoapBinding</con:interface>
                    <con:operation>sendMessage</con:operation>
                    <con:request name="Copy of Copy of Submit Message" id="7dc400ff-4173-4c4b-9146-54bd15cee994">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>${#Project#localUrl}/services/backend</con:endpoint>
                        <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:sendRequest>
         <payload payloadId="cid:message">PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</payload>
      </_1:sendRequest>
   </soap:Body>
</soap:Envelope>
]]></con:request><con:assertion type="SOAP Response" id="3a65a26d-664a-40b6-9237-8cfd66c7c2db"/><con:assertion type="SOAP Fault Assertion" id="d3b2a875-2c73-4b67-a8c8-f45848cb70da" name="Not SOAP Fault"/><con:assertion type="XPath Match" id="f0667722-516b-4a0c-ba90-e95409275f02" name="XPath Match"><con:configuration><path>exists(//messageID)</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="c8a24d36-ed80-46f7-90dd-1c94f468ce2d" name="Script Assertion"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("RECEIVED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" id="4fcbd953-53b3-4eba-93f9-e2ab51637300" name="SOAP Fault"/><con:assertion type="Invalid HTTP Status Codes" id="8633b9a6-a801-4b9b-b480-f20f58429bf3" name="Invalid HTTP Status Codes"><con:configuration><codes>999</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Copy of Groovy Script" id="9feca5d4-9e24-4560-a796-da2f6a3c8ba6"><con:settings/><con:config><script>testRunner.cancel( "I'm getting tired" )</script></con:config></con:testStep><con:tearDownScript/><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e5a4e3c2-ba87-481c-83e4-895685c23c11</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>905c1ea0-a5b7-4f9b-9299-301e42aa217e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4756f893-b022-419a-a4a2-4c8faf31e0a5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e6391559-784a-4705-b0b1-3059936fe807</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e421f24b-f1c6-4ab6-be37-5b45a6806286</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>16886390-c49b-4574-ac54-28fe4ce6b20f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bbe5183d-f059-4804-8409-61c4784987cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>88d576ba-a790-4011-aa0a-a5042d1ae306</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:testSuite id="d96f6775-90be-4470-9cad-2f172c5ac7f3" name="PASSING TCs For Bamboo"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS000-Clean Database" searchProperties="true" id="a762ae95-e616-4d06-a45f-3a1cc31da287">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Clean All" id="e4d4e061-72ca-46d5-a01d-9a48f9acd1dc"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.cleanDatabaseAll()
test.finalize()</script></con:config></con:testStep><con:tearDownScript>ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS001-Submit Message-Basic Flow" searchProperties="true" id="fc5799aa-a012-4399-b831-0a12b65fa64c">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Submit Message" id="a3f6153f-14be-42c1-a4d3-9e1e3baf919d"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61617");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");

// Optional


messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");

String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="2f5c64f8-1c41-46f5-bd21-8af357bbedaa" disabled="true"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.waitForStatus("ACKNOWLEDGED","DOWNLOADED","-DomJMS001-") // Message ID not set to fix value => test step disabled
test.finalize()
</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageID("-DomJMS001-")
test.finalize()

ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS002-Submit Message-Basic Flow-Message with ID" searchProperties="true" id="9558f966-7239-4872-a43d-94d189a7cffa">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Submit Message" id="6655fa5e-1b58-4e74-a95d-f7abc70c1786"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS002-");
// messageMap.setStringProperty("conversationId", "123");
// messageMap.setStringProperty("refToMessageId", "11");
 

// messageMap.setJMSCorrelationID("12345");

messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="86f2eb53-0037-4cb5-955e-6659c538e6bf"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.waitForStatus("ACKNOWLEDGED","DOWNLOADED","-DomJMS002-")
test.finalize()</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageID("-DomJMS002-");
test.finalize();
ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS006-Submit Message-Exceptional flow-Data-Message ID-Unicity" searchProperties="true" id="dc332a5d-6d12-4a42-9127-c9f9b8edd2e2">
            <con:settings/>
            <con:testStep type="groovy" name="Submit Message 1" id="5b884e9e-8168-43ec-a800-c1e72d658f40"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS006-");
// messageMap.setStringProperty("conversationId", "123");
// messageMap.setStringProperty("refToMessageId", "11");
// messageMap.setJMSCorrelationID("12345");

messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep>
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Test 1" id="36f270ac-60cf-4343-beeb-264d81eb2c0d"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.waitForStatus("ACKNOWLEDGED","DOWNLOADED","-DomJMS006-");
test.finalize();</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message 2" id="79af0a89-82d5-40dc-8246-f7524f20975f"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS006-");
// messageMap.setStringProperty("conversationId", "123");
// messageMap.setStringProperty("refToMessageId", "11");
 

// messageMap.setJMSCorrelationID("12345");

messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test 2" id="9a04f265-9f1d-4a32-a7ab-54f65dc0cbc8"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.verifyMessageUnicity("-DomJMS006-");
test.finalize();</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageID("-DomJMS006-");
test.finalize();
ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5b884e9e-8168-43ec-a800-c1e72d658f40</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>36f270ac-60cf-4343-beeb-264d81eb2c0d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>79af0a89-82d5-40dc-8246-f7524f20975f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9a04f265-9f1d-4a32-a7ab-54f65dc0cbc8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS007-Submit Message-messageType-Mandatory" searchProperties="true" id="029f46f6-a0cf-4390-8f23-3799927e8ac3">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Submit Message" id="37e198e1-dfa8-4029-b368-6a66bd8aca6a"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

//messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS007-");
// messageMap.setStringProperty("conversationId", "123");
// messageMap.setStringProperty("refToMessageId", "11");
 

// messageMap.setJMSCorrelationID("12345");

messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="e33b2c14-1317-451a-92c6-acbafda6e001"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.verifyMessagePresence(0,0,"-DomJMS007-");
test.finalize();</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageID("-DomJMS007-");
test.finalize();
ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS008-Submit Message-messageType-Value" searchProperties="true" id="861a3381-0336-4e29-b57a-96851b3afb36">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Submit Message" id="2a674bf3-9a64-4110-9ac7-1f49e9f83607"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "pushMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS008-");
// messageMap.setStringProperty("conversationId", "123");
// messageMap.setStringProperty("refToMessageId", "11");
 

// messageMap.setJMSCorrelationID("12345");

messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="53b15681-87a6-4331-9a0f-f2e19e890173"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.verifyMessagePresence(0,0,"-DomJMS007-");
test.finalize();</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageID("-DomJMS008-");
test.finalize();
ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS009-Submit Message-action-Mandatory" searchProperties="true" id="ed7b90d2-099d-4589-a402-073208ac3a5b">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Submit Message" id="599b64d4-0eaf-4423-8131-a66a9c28c9bd"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
//messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS009-");
// messageMap.setStringProperty("conversationId", "123");
// messageMap.setStringProperty("refToMessageId", "11");
 

// messageMap.setJMSCorrelationID("12345");

messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="92b0617e-9ca0-4c65-a139-f8368a230f62"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.verifyMessagePresence(0,0,"-DomJMS009-");
test.finalize();</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageID("-DomJMS009-");
test.finalize();
ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS012-Submit Message-Service-Mandatory" searchProperties="true" id="af9ddfda-e7d5-411e-832e-137cd658ecd8">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Submit Message" id="1c3e0dfa-e884-4611-85cc-fce88642f871"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
//messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS012-");
// messageMap.setStringProperty("conversationId", "123");
// messageMap.setStringProperty("refToMessageId", "11");
 

// messageMap.setJMSCorrelationID("12345");

messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="54589ef5-c433-4a08-b140-42a146b67673"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.verifyMessagePresence(0,0,"-DomJMS012-");
test.finalize();</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageID("-DomJMS012-");
test.finalize();
ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS015-Submit Message-serviceType-Mandatory-service typed" searchProperties="true" id="61e68439-b6c1-4195-89f8-b812229c5108">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Submit Message" id="bc2a1546-4dbb-4310-bf87-f220132faf76"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
//messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS015-");
// messageMap.setStringProperty("conversationId", "123");
// messageMap.setStringProperty("refToMessageId", "11");
 

// messageMap.setJMSCorrelationID("12345");

messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="f67537c5-9868-4e9f-bdd5-739cfec81a8e"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.verifyMessagePresence(0,0,"-DomJMS015-");
test.finalize();</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageID("-DomJMS015-");
test.finalize();
ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS017-Submit Message-conversationId" searchProperties="true" id="a6da06bb-13e5-471c-9cfa-94c8484c0fef">
            <con:description/><con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Submit Message 1" id="337693e6-d01c-4439-9521-24ce098ee269"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS017-1-");
messageMap.setStringProperty("conversationId", "123");


messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message 2" id="3b40bbed-e32e-4914-9233-835456ba5072"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61617");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-red");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-blue");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS017-2-");
messageMap.setStringProperty("conversationId", "123");


messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message 3" id="d4fc8565-27c9-4dcc-b3fb-4d74a19e13f7"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS017-3-");


messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="e7784c62-0547-491e-bcb4-9ef8ce08227f"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.verifyMessagePresence(1,1,"-DomJMS017-1-");
test.verifyMessagePresence(1,1,"-DomJMS017-2-");
test.verifyMessagePresence(1,1,"-DomJMS017-3-");
test.finalize();</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageIDStartsWith("-DomJMS017-");
test.finalize();
ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS018-Submit Message-refToMessageId" searchProperties="true" id="b269bea2-a476-4c60-9243-1194c2917a8c">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Submit Message 1" id="7f2b120d-a1de-4e78-8f43-a2eb12d9962f"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS018-1-");


messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message 2" id="1b53f14f-b937-44ea-bb18-588945aba02d"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS018-2-");
messageMap.setStringProperty("refToMessageId", "-DomJMS018-1-");
 

messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message 3" id="14979a87-2d28-4d5d-ba07-f4f8f4f217e2"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS018-3-");
messageMap.setStringProperty("refToMessageId", "-random-");

messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="8a32d9c1-d3cf-4de7-a37e-61d51cbb549e"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.verifyMessagePresence(1,1,"-DomJMS018-1-");
test.verifyMessagePresence(1,1,"-DomJMS018-2-");
test.verifyMessagePresence(1,1,"-DomJMS018-3-");
test.finalize();</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageIDStartsWith("-DomJMS018-")
test.finalize()
ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS024-Submit Message-fromRole-Mandatory" searchProperties="true" id="b774907c-36f5-45ff-bebb-daf5def6dfd3">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Submit Message 1" id="5b9a2850-3b19-4fae-9cef-f7b6d011731d"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
//messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS024-1-");


messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message 2" id="1296a5b0-a2bc-4847-9b70-f896c3bc1ce2"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS024-2-");


messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="081f50bc-dd56-472c-97cb-9f33b4b0734f"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.verifyMessagePresence(0,0,"-DomJMS024-1-");
test.verifyMessagePresence(1,1,"-DomJMS024-2-");
test.finalize();</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageIDStartsWith("-DomJMS024-")
test.finalize()
ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS025-Submit Message-fromRole-Empty" searchProperties="true" id="f34b97c7-c535-482a-b80d-4708083e62b6">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Submit Message" id="8f706b81-2007-4f39-9051-4560579f097c"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "");
messageMap.setStringProperty("toRole", "");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS025-");


messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="61ade91c-a290-4696-b9cd-49f844445ace"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.verifyMessagePresence(0,0,"-DomJMS025-");
test.finalize();</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageID("-DomJMS025-");
test.finalize();
ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS029-Submit Message-toRole-Empty" searchProperties="true" id="677a24ce-39c5-4678-80d4-995abe842797">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Submit Message" id="43f3b0af-329d-4027-af3a-ec841e21aaf1"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "");
messageMap.setStringProperty("toRole", "");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS029-");
// messageMap.setStringProperty("conversationId", "123");
// messageMap.setStringProperty("refToMessageId", "11");
 

// messageMap.setJMSCorrelationID("12345");

messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="b1c5df9f-f346-4adc-a3ad-7f7e5b993412"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.verifyMessagePresence(0,0,"-DomJMS029-");
test.finalize();</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageID("-DomJMS029-");
test.finalize();
ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS032-Submit Message-fromPartyId-Mandatory" searchProperties="true" id="03f2c2ba-8d78-4a2d-9085-fea9b24bd27e">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Submit Message 1" id="7219a129-9105-41e9-99e1-cc191e56a7f6"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("Timestamp", "2016-01-10");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
//messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS032-1-");


messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message 2" id="842b17c4-7424-4ac1-b61a-a7f7dcb33e33"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS032-2-");


messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="31fad918-2635-4b29-a203-b75395d5b0f0"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.verifyMessagePresence(0,0,"-DomJMS032-1-");
test.verifyMessagePresence(1,1,"-DomJMS032-2-");
test.finalize();</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageIDStartsWith("-DomJMS032-")
test.finalize()
ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS034-Submit Message-fromPartyType-Mandatory" searchProperties="true" id="c4d35fa8-e1c9-454c-933a-450563948f8a">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Submit Message 1" id="3c0e2f1d-edcc-415e-b042-41b0957f8403"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
//messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS034-1-");


messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message 2" id="ad8a930c-5007-4cca-9e54-2111a4cfe345"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS034-2-");


messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="1572ecc3-e254-4595-9a20-a92b9a3fb615"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.verifyMessagePresence(0,0,"-DomJMS034-1-");
test.verifyMessagePresence(1,1,"-DomJMS034-2-");
test.finalize();</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageIDStartsWith("-DomJMS034-")
test.finalize()
ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS036-Submit Message-toPartyId-Mandatory" searchProperties="true" id="4331b2d0-2f7d-4510-8c94-a7e6008c482a">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Submit Message 1" id="abee783a-b8e1-4b97-879e-c56b69eecea9"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
//messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS036-1-");


messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message 2" id="5696ce65-c220-4e6f-8ddc-f9e44a7154fb"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS036-2-");


messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="db4af41b-1ed0-40a9-9c22-d7cf2502bd90"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.verifyMessagePresence(0,0,"-DomJMS036-1-");
test.verifyMessagePresence(1,1,"-DomJMS036-2-");
test.finalize();</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageIDStartsWith("-DomJMS036-")
test.finalize()
ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS038-Submit Message-toPartyType-Mandatory" searchProperties="true" id="e3d9a697-672b-4bea-88e2-f32023918d69">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Submit Message 1" id="472c1132-1d1e-4c8a-be4a-657343de72b7"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
//messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS038-1-");


messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message 2" id="c078a913-d810-4cca-a933-be56314c0c72"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS038-2-");


messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="489513a7-9a19-4905-8acf-26af49c84fee"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.verifyMessagePresence(0,0,"-DomJMS038-1-");
test.verifyMessagePresence(1,1,"-DomJMS038-2-");
test.finalize();</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageIDStartsWith("-DomJMS038-")
test.finalize()
ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS044-Submit Message-totalNumberOfPayloads-Mandatory" searchProperties="true" id="4cdee9bb-8c7b-4a3b-a56c-489023533bda">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Submit Message 1" id="be3d83f6-6e16-4c8e-a5d6-622cd4576105"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS044-1-");


//messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message 2" id="2fba595e-6d2e-49a7-9daa-297c0d261f45"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS044-2-");


messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="52a0394d-c0ea-412e-89c0-90daca8e1e6f"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.verifyMessagePresence(0,0,"-DomJMS044-1-");
test.verifyMessagePresence(1,1,"-DomJMS044-2-");
test.finalize();</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageIDStartsWith("-DomJMS044-")
test.finalize()
ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS048-Submit Message-payload_contentId" searchProperties="true" id="ec8a55f1-b57d-4c64-812a-41cb4a8afcbb">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Submit Message 1" id="b6547746-5130-4bf7-b4a1-9f894bdce5a0"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS048-1-");


messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:whatever");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message 2" id="88bca6fa-a698-4109-989b-39fc9e31f5c5"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS048-2-");


messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message 3" id="987ee0d8-45ca-47c4-baab-5aa70cdcbbe6"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS048-3-");


messageMap.setStringProperty("totalNumberOfPayloads", "1");
//messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="0806d416-9025-4e28-b2cc-cf884d7eab28"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.verifyMessagePresence(0,0,"-DomJMS048-1-");
test.verifyMessagePresence(0,0,"-DomJMS048-2-");
test.verifyMessagePresence(0,0,"-DomJMS048-3-");
test.finalize();</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageIDStartsWith("-DomJMS048-")
test.finalize()
ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="4e0191a1-8ef4-4c7c-b98e-cf5217d19398" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS050-Test Experience-Several payloads" searchProperties="true"><con:settings/><con:testStep type="request" name="Submit Message1" id="839f3079-d960-479e-b825-50faa179e077" disabled="true">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>BackendService_1_1SoapBinding</con:interface>
                    <con:operation>sendMessage</con:operation>
                    <con:request name="Submit Message1" id="7dc400ff-4173-4c4b-9146-54bd15cee994">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>${#Project#localUrl}/domibus/services/backend</con:endpoint>
                        <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
                <ns:PartInfo href="cid:attachment">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">application/octet-stream</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:sendRequest>
         <payload payloadId="cid:message">PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</payload>
         <payload payloadId="cid:message">PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxoZWxsbz53b3JsZCAyPC9oZWxsbz4=</payload>
         <payload payloadId="cid:attachment">cid:1234</payload>
      </_1:sendRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="3a65a26d-664a-40b6-9237-8cfd66c7c2db"/><con:assertion type="SOAP Fault Assertion" id="d3b2a875-2c73-4b67-a8c8-f45848cb70da" name="Not SOAP Fault"/><con:assertion type="XPath Match" id="f0667722-516b-4a0c-ba90-e95409275f02" name="XPath Match"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="753e87d3-8dd2-4862-b385-4f1161093818" name="Script Assertion"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context,'${#Project#jdbcUrl1}','${#Project#jdbcUrl2}','${#Project#driver}');
test.waitForStatus("ACKNOWLEDGED","DOWNLOADED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:attachment><con:name>europe.jpg</con:name><con:contentType>application/octet-stream</con:contentType><con:size>27823</con:size><con:contentId>1234</con:contentId><con:part>1234</con:part><con:data>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</con:data><con:id>5ef2fed2-6aea-473f-98a2-53ba3d012fa4</con:id></con:attachment><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Submit Message" id="f7f0b896-c84f-4f38-a8ba-0c823f74129d"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS050-");


messageMap.setStringProperty("totalNumberOfPayloads", "2");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload1 = pay1.getBytes();
messageMap.setBytes("payload_1", payload1);

messageMap.setStringProperty("payload_2_mimeContentId", "cid:attachment");
messageMap.setStringProperty("payload_2_mimeType", "application/pdf");
messageMap.setStringProperty("payload_2_description", "message");
String pay2 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload2 = pay2.getBytes();
messageMap.setBytes("payload_2", payload2);

/*messageMap.setStringProperty("payload_3-mimeContentId", "cid:message");
messageMap.setStringProperty("payload_3-mimeType", "text/xml");
messageMap.setStringProperty("payload_3-description", "message");
String pay3 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload3 = pay3.getBytes();
messageMap.setBytes("payload_3", payload3);*/

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="bc4d8749-e66b-454d-ad85-b012c03066b6"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.verifyMessagePresence(1,1,"-DomJMS050-");
test.finalize();</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageID("-DomJMS050-");
test.finalize();
ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS051-Submit message-Tab and spaces" searchProperties="true" id="4379459a-54e1-4be3-b3c6-64d078d8b2bd">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" name="Submit Message1" id="cefdda51-0224-4d64-92ec-052b924a7e2b" disabled="true">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>BackendService_1_1SoapBinding</con:interface>
                    <con:operation>sendMessage</con:operation>
                    <con:request name="Submit Message1" id="7dc400ff-4173-4c4b-9146-54bd15cee994">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>${#Project#localUrl}/domibus/services/backend</con:endpoint>
                        <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId> -Dom088-</ns:MessageId>
               <ns:RefToMessageId>12349999	</ns:RefToMessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">	domibus-blue</ns:PartyId>
                  <ns:Role> http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1"> bdx:noprocess	</ns:Service>
               <ns:Action>	TC1Leg1 </ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">		urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">    urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml </ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:sendRequest>
         <payload payloadId="cid:message">PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</payload>
      </_1:sendRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="3a65a26d-664a-40b6-9237-8cfd66c7c2db"/><con:assertion type="SOAP Fault Assertion" id="d3b2a875-2c73-4b67-a8c8-f45848cb70da" name="Not SOAP Fault"/><con:assertion type="XPath Match" id="f0667722-516b-4a0c-ba90-e95409275f02" name="XPath Match"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="c8a24d36-ed80-46f7-90dd-1c94f468ce2d" name="Script Assertion"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context,'${#Project#jdbcUrl1}','${#Project#jdbcUrl2}','${#Project#driver}');
test.verifyMessageStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Submit Message" id="33832f77-c6c3-4d6e-945d-a35dc2481c52"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", " bdx:noprocess	");
messageMap.setStringProperty("serviceType", "  tc1");
messageMap.setStringProperty("action", "TC1Leg1		");
messageMap.setStringProperty("fromPartyId", "	domibus-blue ");
messageMap.setStringProperty("fromPartyType", " urn:oasis:names:tc:ebcore:partyid-type:unregistered	");
messageMap.setStringProperty("toPartyId", "   domibus-red ");
messageMap.setStringProperty("toPartyType", " urn:oasis:names:tc:ebcore:partyid-type:unregistered	");
messageMap.setStringProperty("fromRole", " http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator ");
messageMap.setStringProperty("toRole", "	http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder	");
messageMap.setStringProperty("originalSender", " urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1   ");
messageMap.setStringProperty("finalRecipient", "		urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS051-");


messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "	cid:message	");
messageMap.setStringProperty("payload_1_mimeType", "	text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="7c20e99e-e3e0-4b3b-b32c-39db59de614a"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.verifyMessagePresence(0,0,"-DomJMS051-");
test.finalize();</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageID("-DomJMS051-");
test.finalize();
ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1296a5b0-a2bc-4847-9b70-f896c3bc1ce2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:testSuite id="70fb57c1-3cd1-451e-af52-33a3a0f5643d" name="PASSING TCs - Not for Bamboo"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS003-Submit Message-Exceptional flow-No receipt" searchProperties="true" id="75c0c0e0-d072-4073-babd-bb5eca6ed771">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Stop Receiver MSH" id="a3e8aa50-4124-43f9-bfdc-296183e6c303"><con:settings/><con:config><script>Domibus.stopMSH("receiver",context, log);</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message" id="e4dc722a-da83-4d6d-9cf8-262dc58f0585"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS003-");
// messageMap.setStringProperty("conversationId", "123");
// messageMap.setStringProperty("refToMessageId", "11");
 

// messageMap.setJMSCorrelationID("12345");

messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="d96c0d09-2b87-4cfa-a0dc-f96081c863ec"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.waitForStatus("WAITING_FOR_RETRY",null,"-DomJMS003-");
test.verifyMessagePresence(1,0,"-DomJMS003-");
test.finalize();</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageIDStartsWith("-DomJMS003-");
test.finalize();
Domibus.startMSH("receiver", context, log)
ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e4dc722a-da83-4d6d-9cf8-262dc58f0585</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d96c0d09-2b87-4cfa-a0dc-f96081c863ec</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS004-Submit message-Exceptional flow-retry max not reached" searchProperties="true" id="6b3f4d9a-d4a1-4098-955d-5d8e118ddd42">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Stop Receiver MSH" id="dbc5fbb2-611e-432f-ba1b-aeeee66ff3a8"><con:settings/><con:config><script>Domibus.stopMSH("receiver",context, log);</script></con:config></con:testStep><con:testStep type="delay" name="D1" id="b20f9492-37a1-4992-a2ae-5d336a40247b"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="groovy" name="Submit Message" id="9c6f08d0-5ce3-4757-b59f-44bb1b1640b3"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS004-");
// messageMap.setStringProperty("conversationId", "123");
// messageMap.setStringProperty("refToMessageId", "11");
 

// messageMap.setJMSCorrelationID("12345");

messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="0a2b3efa-6626-42cd-bf6a-1b83dd688944"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.waitForStatus("WAITING_FOR_RETRY",null,"-DomJMS004-")
test.verifyMessagePresence(1,0,"-DomJMS004-")
test.finalize()</script></con:config></con:testStep><con:testStep type="groovy" name="Start Receiver MSH" id="33b4edde-df66-466f-8381-572fe3531b14"><con:settings/><con:config><script>Domibus.startMSH("receiver", context, log)</script></con:config></con:testStep><con:testStep type="delay" name="D2" id="87ea9d93-446f-46d0-aaa7-7a0f4209344c"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="groovy" name="Check message submitted" id="490409fd-9d66-4c7c-8005-c4014f3f48cd"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.waitForStatus("ACKNOWLEDGED","DOWNLOADED","-DomJMS004-","Long");
test.finalize();</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageID("-DomJMS004-")
test.finalize()
Domibus.startMSH("receiver", context, log)
ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9c6f08d0-5ce3-4757-b59f-44bb1b1640b3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0a2b3efa-6626-42cd-bf6a-1b83dd688944</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:testSuite id="f82daf4e-2db1-40ac-8e6c-5e5d519cf0c0" name="PASSING TCs - Manual TCs"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS052-Test Experience-Truststore Update" searchProperties="true" id="df357ddb-7ba4-486c-a693-783fe586e0a5">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="httprequest" name="Put wrong truststore" id="be616d3c-944f-4e32-a0d2-21921d9fd18f"><con:settings/><con:config method="POST" xsi:type="con:HttpRequest" id="61ffe2a5-f284-4dec-b84a-9a82c84c99b1" name="Put wrong truststore" postQueryString="false" mediaType="multipart/form-data" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding/><con:endpoint>${#Project#localUrl}/home/uploadTruststoreFile</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" id="e4604d4b-7e98-4621-89f0-a412aa38c723" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c88bcac2-185f-4d9e-9c3d-17e0f66703d7" name="Contains"><con:configuration><token>Truststore file has been successfully replaced</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username>admin</con:username><con:password>123456</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:attachment><con:name>gateway_truststore.jks</con:name><con:contentType>application/octet-stream</con:contentType><con:contentId>truststore</con:contentId><con:part xsi:nil="true"/><con:url>${#Project#specialPModesPath}/DynamicDiscovery/Sender/gateway_truststore.jks</con:url><con:id>84332a2d-17ce-4a76-aced-0c1a597eba74</con:id></con:attachment><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><con:parameter><con:name>password</con:name><con:value>test123</con:value><con:style>QUERY</con:style></con:parameter></con:parameters></con:config></con:testStep><con:testStep type="groovy" name="Restart Domibus Sender" id="cd8b9098-8fbd-42a9-8eb7-67404b5f59dd"><con:settings/><con:config><script>Domibus.stopMSH("sender",context, log);

Domibus.startMSH("sender",context, log);

log.info "--DONE--";</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message 1" id="e138bc36-5999-4555-b848-c445b16888f9"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");

// Optional
messageMap.setStringProperty("messageId", "-DomJMS052-1-");

messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="e97f82e7-7d63-4602-a5af-e5b9d0a674a4"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.verifyMessagePresence(1,0,"-DomJMS052-1-");
test.finalize();</script></con:config></con:testStep><con:testStep type="httprequest" name="restore truststore" id="bed6d5e9-a752-4924-85f2-7d968b646bac"><con:settings/><con:config method="POST" xsi:type="con:HttpRequest" id="61ffe2a5-f284-4dec-b84a-9a82c84c99b1" name="restore truststore" postQueryString="false" mediaType="multipart/form-data" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding/><con:endpoint>${#Project#localUrl}/home/uploadTruststoreFile</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" id="e4604d4b-7e98-4621-89f0-a412aa38c723" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c88bcac2-185f-4d9e-9c3d-17e0f66703d7" name="Contains"><con:configuration><token>Truststore file has been successfully replaced</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username>admin</con:username><con:password>123456</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:attachment><con:name>gateway_truststore.jks</con:name><con:contentType>application/octet-stream</con:contentType><con:contentId>truststore</con:contentId><con:part xsi:nil="true"/><con:url>${#Project#defaultPModesPath}/blue/gateway_truststore.jks</con:url><con:id>84332a2d-17ce-4a76-aced-0c1a597eba74</con:id></con:attachment><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><con:parameter><con:name>password</con:name><con:value>test123</con:value><con:style>QUERY</con:style></con:parameter></con:parameters></con:config></con:testStep><con:testStep type="groovy" name="Submit Message 2" id="b0129e45-36e6-4d3e-8293-1bda0a47e0f7"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");

// Optional
messageMap.setStringProperty("messageId", "-DomJMS052-2-");

messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test good truststore" id="46ca4d4e-1b9b-40fc-8124-6c4d4a937579"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.verifyMessagePresence(1,1,"-DomJMS052-2-");
test.finalize();</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageIDStartsWith("-DomJMS052-");
test.finalize();
Domibus.startMSH("sender", context, log)
ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cd8b9098-8fbd-42a9-8eb7-67404b5f59dd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>906220c2-8277-4fcb-a3bd-f15306888b25</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>53c0a958-b619-493b-b45b-7b9d7ecf4e43</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e138bc36-5999-4555-b848-c445b16888f9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bed6d5e9-a752-4924-85f2-7d968b646bac</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS054-Manual-EDELIVERY-1684-Message Id should always be present in the messages sent" searchProperties="true" id="823c4d03-ce45-4691-8c98-cad72b29239e">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Submit Message 1" id="d9aa8bb3-f41f-491b-9497-49f6152b3790"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");

// Optional
messageMap.setStringProperty("messageId", "-DomJMS054-");

messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message 2" id="5b5dcdb9-3385-4bd5-8a7b-94cc170b8f02"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");

// Optional
messageMap.setStringProperty("messageId", "-DomJMS054-"); // intentionally send second message with same ID the messgae should end in [internal] domibus.DLQ queue

messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test msg present" id="38fa4dff-3e50-4a99-a357-1119b99890b4"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.verifyMessagePresence(1,1,"-DomJMS054-");
test.finalize();</script></con:config></con:testStep><con:testStep type="groovy" name="Check if messageID property can be found in JMS queues" id="17cf3adf-7e50-41b7-91c1-14cfeaf3fb37"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"""\
Intentionally send second message with the same messageID.
Check on Domibus - JMS Monitoring page that error message with messageID can be found in:
- [internal] domibus.backend.jms.replyQueue JMS queue at first 
- and in [internal] domibus.DLQ JMS queue after the retry limit is reached.
"""); 

if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageID("-DomJMS054-");
test.finalize();
ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>90414ed1-d501-45a8-86b6-466a1352735c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cd8b9098-8fbd-42a9-8eb7-67404b5f59dd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>906220c2-8277-4fcb-a3bd-f15306888b25</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>53c0a958-b619-493b-b45b-7b9d7ecf4e43</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e138bc36-5999-4555-b848-c445b16888f9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS055-Manual-EDELIVERY-1706-JMS Monitoring: empty messages are not displayed" searchProperties="true" id="573a0dc2-c0ae-4724-ada9-b0c7b941b121">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Submit Message 1" id="f1f60f19-e285-452c-ba88-5ba6a67751e8"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.DLQ");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
 
Message request = session.createTextMessage(null);
 
log.info "Sending Text message with empty (null) text message"
producer.send(request);
log.info "Text message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Check if messageID property can be found in JMS queues" id="470eace6-21d5-4578-9fda-fc1981095f34"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"""\
In previous step intentionally empty text message was send to Dead Letter Queue.
Check on Domibus - JMS Monitoring page that message is present in:
[internal] domibus.DLQ JMS queue of Sender.
"""); 

if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:tearDownScript>ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>90414ed1-d501-45a8-86b6-466a1352735c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cd8b9098-8fbd-42a9-8eb7-67404b5f59dd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>906220c2-8277-4fcb-a3bd-f15306888b25</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>53c0a958-b619-493b-b45b-7b9d7ecf4e43</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e138bc36-5999-4555-b848-c445b16888f9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:testSuite id="92cdd1dd-669c-41c8-969d-4702e283d852" name="Retention issue" disabled="true"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS005-Submit message-Exceptional flow-retry max reached" searchProperties="true" id="62e60887-cc30-4213-abe8-7def79055d30">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Stop Receiver MSH" id="4e0ce318-64f8-4072-916a-8553dce2b973"><con:settings/><con:config><script>Domibus.stopMSH("receiver",context, log);</script></con:config></con:testStep><con:testStep type="delay" name="D1" id="a2dbe87e-a229-4a32-b1a5-2421a171d9ef"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="groovy" name="Submit Message" id="c189cf14-cd7d-41a8-81fe-3e1d4e5c28fa"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS005-");
// messageMap.setStringProperty("conversationId", "123");
// messageMap.setStringProperty("refToMessageId", "11");
 

// messageMap.setJMSCorrelationID("12345");

messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="bc00ae7a-2d2a-4e11-90d4-ae07623d92ea"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.waitForStatus("WAITING_FOR_RETRY",null,"-DomJMS005-");
test.verifyMessagePresence(1,0,"-DomJMS005-");
test.finalize();</script></con:config></con:testStep><con:testStep type="request" name="Submit Message1" id="995ed4ca-da45-454b-9202-7608c7374f64" disabled="true">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>BackendService_1_1SoapBinding</con:interface>
                    <con:operation>sendMessage</con:operation>
                    <con:request name="Submit Message1" id="7dc400ff-4173-4c4b-9146-54bd15cee994">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>${#Project#localUrl}/domibus/services/backend</con:endpoint>
                        <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom005-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:sendRequest>
         <payload payloadId="cid:message">PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</payload>
      </_1:sendRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="3a65a26d-664a-40b6-9237-8cfd66c7c2db"/><con:assertion type="SOAP Fault Assertion" id="d3b2a875-2c73-4b67-a8c8-f45848cb70da" name="Not SOAP Fault"/><con:assertion type="XPath Match" id="f0667722-516b-4a0c-ba90-e95409275f02" name="XPath Match"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="c8a24d36-ed80-46f7-90dd-1c94f468ce2d" name="Script Assertion"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context,'${#Project#jdbcUrl1}','${#Project#jdbcUrl2}','${#Project#driver}');
test.waitForStatus("WAITING_FOR_RETRY",null);
test.verifyMessagePresence(1,0);
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D2" id="448e8a67-111e-48c9-aec0-7a5e8b965976"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="groovy" name="Check message submitted" id="bd0a2320-4d1c-4cb1-97ea-933fc4c02c98"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.waitForStatus("SEND_FAILURE",null,"-DomJMS005-","Long");
test.verifyMessagePresence(1,0,"-DomJMS005-");
test.finalize();</script></con:config></con:testStep><con:tearDownScript>Domibus.startMSH("receiver", context, log)

ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c189cf14-cd7d-41a8-81fe-3e1d4e5c28fa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bc00ae7a-2d2a-4e11-90d4-ae07623d92ea</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:testSuite id="e653ca68-8ae3-40f3-9908-0dfd9f28cc74" name="EDELIVERY-1388 - Differences in message parameters JMS and WS plugins" disabled="true"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS014-Submit Message-serviceType-Optional-service untyped" searchProperties="true" id="a3b4872d-e2e5-4fb4-ab66-a36044f99b43">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Submit Message" id="04452c85-4a3a-4673-8221-e94f6b3aaf2f"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
//messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS014-");
// messageMap.setStringProperty("conversationId", "123");
// messageMap.setStringProperty("refToMessageId", "11");
 

// messageMap.setJMSCorrelationID("12345");

messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="c6af36cd-1644-43b4-9b03-a8b8f788490e"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.verifyMessagePresence(1,1,"-DomJMS014-");
test.finalize();</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageID("-DomJMS014-");
test.finalize();
ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS020-Submit Message-agreementRef-Optional" searchProperties="true" id="a71907e4-a690-4943-a89d-0cead23fa379">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Submit Message 1" id="221f12dd-294f-497d-8c34-05ca848faa25"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc8");
messageMap.setStringProperty("action", "TC8Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS020-1-");
messageMap.setStringProperty("agreementRef", "agreementForDomJMS020Value");


messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message 2" id="61b4d9bb-4e84-41fc-8693-38ddde563805"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc8");
messageMap.setStringProperty("action", "TC8Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS020-2-eee");



messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="8b66d325-d6f1-4e0f-bac9-0933ffb9c8a4"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.waitForStatus("ACKNOWLEDGED","DOWNLOADED","-DomJMS020-1-");
test.waitForStatus("ACKNOWLEDGED","DOWNLOADED","-DomJMS020-2-");
test.finalize();</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageIDStartsWith("-DomJMS020-");
test.finalize();
ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS023-Submit Message-agreementRefType" searchProperties="true" id="6534c72f-d7b7-439d-9ba5-b4a936f6ce37">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Submit Message 1" id="4ff13b81-4b1a-4bd6-98a1-39a4d7dc6ad0"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc9");
messageMap.setStringProperty("action", "TC9Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS023-1-");
messageMap.setStringProperty("agreementRef", "agreementForDomJMS023Value");
messageMap.setStringProperty("agreementRefType", "random");
 

// messageMap.setJMSCorrelationID("12345");

messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message 2" id="51f172b0-1579-4e33-8238-4f8fcde52724"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS023-2-");
messageMap.setStringProperty("agreementRefType", "useless");
 

// messageMap.setJMSCorrelationID("12345");

messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="9607393a-71fc-4c74-9f17-ef24aea77795"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.waitForStatus("ACKNOWLEDGED","DOWNLOADED","-DomJMS023-1-");
test.waitForStatus("ACKNOWLEDGED","DOWNLOADED","-DomJMS023-2-");
test.finalize();</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageIDStartsWith("-DomJMS023-");
test.finalize();
ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS043-Submit Message-protocol-Optional" searchProperties="true" id="2484195b-519f-43c8-9841-1441c62ae578">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Submit Message 1" id="133bbc9d-4fa6-423a-a2c9-39c34bbdc1a0"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
//messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS043-1-");


messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message 2" id="32e385b5-7edd-460c-a9f8-ccbcc959cdb1"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS043-2-");


messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message 3" id="99884ca6-6750-4fc8-b686-65d6f4a7ad94"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS043-3-");


messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message 4" id="961097d1-6119-41d1-b47d-e81ac893b45e"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS2");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS043-4-");


messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="5dc8531c-c0c6-4045-bfa2-022ac93b6024"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.verifyMessagePresence(1,1,"-DomJMS043-1-");
test.verifyMessagePresence(1,1,"-DomJMS043-2-");
test.verifyMessagePresence(0,0,"-DomJMS043-3-");
test.verifyMessagePresence(0,0,"-DomJMS043-4-");
test.finalize();</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageID("-DomJMS043-1-");
test.cleanDBMessageID("-DomJMS043-2-");
test.cleanDBMessageID("-DomJMS043-3-");
test.cleanDBMessageID("-DomJMS043-4-");
test.finalize();
ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS040-Submit Message-JMScorrelationId" searchProperties="true" id="cc2bd7ec-f5c6-4491-8d00-15fc503c31c5">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Submit Message" id="4b96b77d-27fd-4568-8e06-a880c8a31988"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS040-");
messageMap.setStringProperty("JMScorrelationId", "-DomJMS040-JMScorrelationId-");


messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Copy of Submit Message" id="7f5c68cc-4de3-4f4f-a10e-c6126196c79d"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");

// Optional
messageMap.setStringProperty("messageId", "-DomJMS040-2-");

messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="7a4ef157-531c-4b89-8552-affa31098d88"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.verifyMessagePresence(1,1,"-DomJMS040-");
test.finalize();</script></con:config></con:testStep><con:testStep type="groovy" name="Test replyQueue" id="3ef6c6b6-6ed8-432c-a5bd-652673625532"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Browse the replyQueue to look for a message with parameter\nJMScorrelationId = \"-DomJMS040-\""); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageIDStartsWith("-DomJMS040-");
test.finalize();
ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS045-Submit Message-totalNumberOfPayloads-0" searchProperties="true" id="d6eacb5b-ea34-467b-8656-6af30d2b5d3a">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Submit Message 1" id="a83b2b80-1a9d-4051-8f5c-9a5e40e1be1d"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS045-1-");


messageMap.setStringProperty("totalNumberOfPayloads", "0");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message 2" id="7b7f94d6-a300-4488-bc14-254e5dd7cefa"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS045-2-");


messageMap.setStringProperty("totalNumberOfPayloads", "0");
//messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
//messageMap.setStringProperty("payload_1_mimeType", "text/xml");
//messageMap.setStringProperty("payload_1_description", "message");
//String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
//byte[] payload = pay1.getBytes();
//messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="63c8536c-d591-4e27-97a2-d0e0e833ad80"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.verifyMessagePresence(0,0,"-DomJMS045-1-");
test.verifyMessagePresence(1,1,"-DomJMS045-2-");
test.finalize();</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageID("-DomJMS045-1-");
test.cleanDBMessageID("-DomJMS045-2-");
test.finalize();
ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS046-Submit Message-P1InBody-Optional" searchProperties="true" id="c47b8741-90d5-4c93-acca-a0ab6a552457">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Update Default properties file 1" id="b2f3cd3a-0dcd-4a96-bd04-ce3242432770"><con:settings/><con:config><script>DomibusUtils.showPopUpForManualConfigurationChange("""
Update P1InBody value (set line to P1InBody = true) in Sender and Receiver config files (jms-business-defaults.properties), remeber to restart both"""
, log, testRunner); 
</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message 1" id="374ee895-1fb6-435d-8106-37ace52f2755"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS046-1-");

messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message 2" id="b716cb5e-a59e-4e27-87eb-33e933d748c5"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS046-2-");

messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "application/octet-stream");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test P1InBody true" id="25bfcdfb-0e49-444f-98b4-15b1acaa514b"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.verifyMessagePresence(1,1,"-DomJMS046-1-");
test.verifyMessagePresence(0,0,"-DomJMS046-2-");
test.finalize();</script></con:config></con:testStep><con:testStep type="groovy" name="Update Default properties file 2" id="230c268d-d43f-41c8-bde9-41068936c667"><con:settings/><con:config><script>DomibusUtils.showPopUpForManualConfigurationChange("""
Comment P1InBody value (set line to #P1InBody = false) in Sender and Receiver config files (jms-business-defaults.properties), remeber to restart both"""
, log, testRunner); </script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message 3" id="30045746-ec87-4d22-b41e-5b0fab16fccd"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS046-3-");


messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test P1InBody commented" id="d461fe80-cb0a-4827-9cd7-fe3f44322cc8"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.verifyMessagePresence(1,1,"-DomJMS046-3-");
test.finalize();</script></con:config></con:testStep><con:testStep type="groovy" name="Update Default properties file 3" id="1de195c0-a649-4eb4-bf92-90229ef44b7c"><con:settings/><con:config><script>DomibusUtils.showPopUpForManualConfigurationChange("""
Update P1InBody value (set line to P1InBody = false) in Sender and Receiver config files (jms-business-defaults.properties), remeber to restart both"""
, log, testRunner); 
</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message 4" id="ef797b9a-5e4c-4aa5-8885-33701329e37b"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS046-4-");


messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="f907af55-cdac-44d0-8e44-a13a73e84e42"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.verifyMessagePresence(1,1,"-DomJMS046-4-");
test.finalize();</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageIDStartsWith("-DomJMS046-");
test.finalize();
ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b716cb5e-a59e-4e27-87eb-33e933d748c5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS047-Submit Message-payload_Description" searchProperties="true" id="5ff64e41-2dc8-49f0-bc88-b42aca061f6d">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Submit Message 1" id="50ed5561-94dc-41fa-a7d8-d3e943aa0ec3"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS047-1-");


messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "Random Description");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message 2" id="e51e438a-c563-46a9-a07d-cc69709a0291"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS047-2-");


messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message 3" id="7009247c-334b-4900-96ce-ce3d24549fad"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS047-3-");


messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
//messageMap.setStringProperty("payload_1_description", "");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="ff2f765e-b10d-4733-9714-51a8c886d16f"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.verifyMessagePresence(1,1,"-DomJMS047-1-");
test.verifyMessagePresence(1,1,"-DomJMS047-2-");
test.verifyMessagePresence(1,1,"-DomJMS047-3-");
test.finalize();</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageID("-DomJMS047-1-");
test.cleanDBMessageID("-DomJMS047-2-");
test.cleanDBMessageID("-DomJMS047-3-");
test.finalize();
ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS049-Submit Message-MimeType" searchProperties="true" id="f5c502b0-7064-4e5e-8970-93579562532a">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" name="Test Request" id="b80a6bc4-0553-4c48-b85e-d002fffcc0ab" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>downloadMessage</con:operation><con:request name="Test Request" id="ec41df46-973c-40c5-b007-3a494ca7065e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/domibus/services/backend</con:endpoint><con:request/><con:assertion type="SOAP Response" id="1f451541-9b7f-470a-a1e8-1fef90dee8d2"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Submit Message 1" id="b3f56c6b-465e-433b-985b-67cb6b67deac"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");

// Optional
messageMap.setStringProperty("messageId", "-DomJMS049-1-");

messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Check AS4 message" id="4ada5e10-3044-4206-849d-d82681db0c51"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"""
Check that the mime type in AS4 message is set to "text/xml".
Go to Sender log (domibus.log) find the lates AS4 message and check inside value for
//eb:Messagingeb:UserMessage/eb:PayloadInfo/eb:PartInfo[1]/eb:PartProperties/
is:
&lt;eb:Property name="MimeType">text/xml&lt;/eb:Property>.
"""); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message 2" id="60eb6c5a-8de5-4f57-82aa-f32f1eacb64d"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS049-2-");


messageMap.setStringProperty("totalNumberOfPayloads", "2");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);
messageMap.setStringProperty("payload_2-mimeContentId", "cid:attachment");
messageMap.setStringProperty("payload_2-mimeType", "application/pdf");
messageMap.setStringProperty("payload_2-description", "message");
String pay2 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload2 = pay2.getBytes();
messageMap.setBytes("payload_2", payload2);


log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Check AS4 message application/pdf" id="79d16b81-f2af-42dc-bac7-9f612c89790c"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"""
Check that the mime type in AS4 message is set to "application/pdf".
Go to Sender log (domibus.log) find the lates AS4 message and check inside value for
//eb:Messagingeb:UserMessage/eb:PayloadInfo/eb:PartInfo[2]/eb:PartProperties/
is:
&lt;eb:Property name="MimeType">application/pdf&lt;/eb:Property>.
"""); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message 3" id="52dd034a-dca1-4033-a481-8916dfe2f628"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS049-3-");


messageMap.setStringProperty("totalNumberOfPayloads", "2");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);
messageMap.setStringProperty("payload_2-mimeContentId", "cid:attachment");
//messageMap.setStringProperty("payload_2-mimeType", "application/pdf");
messageMap.setStringProperty("payload_2-description", "message");
String pay2 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload2 = pay2.getBytes();
messageMap.setBytes("payload_2", payload2);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Check AS4 message when mime/type not provided" id="6164c7d4-d54a-4386-a077-9c8ecc7be02b"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"""
Check that the mime type in AS4 message is set to deafult value "application/octet-stream" as described in ICD.
Go to Sender log (domibus.log) find the lates AS4 message and check inside value for
//eb:Messagingeb:UserMessage/eb:PayloadInfo/eb:PartInfo[2]/eb:PartProperties/
is:
&lt;eb:Property name="MimeType">application/octet-stream&lt;/eb:Property>.
"""); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="0ad14c70-49c0-4325-a766-363df4d6eef6"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.verifyMessagePresence(1,1,"-DomJMS049-1-");
test.verifyMessagePresence(1,1,"-DomJMS049-2-");
test.verifyMessagePresence(1,1,"-DomJMS049-3-");
test.finalize();</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageIDStartsWith("-DomJMS049-");
test.finalize();
ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>79d16b81-f2af-42dc-bac7-9f612c89790c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6164c7d4-d54a-4386-a077-9c8ecc7be02b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:testSuite id="cb8cdf38-6b66-4692-87f6-f87b076a553b" name="EDELIVERY-XXXX - Role not mandatory because od dynamical discovery" disabled="true"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS028-Submit Message-toRole-Mandatory" searchProperties="true" id="eaf9af88-7035-4343-9f9f-abde5261cef1">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Submit Message 1" id="b54e5866-57eb-4836-b8ac-765e022374db"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
//messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS028-1-");
// messageMap.setStringProperty("conversationId", "123");
// messageMap.setStringProperty("refToMessageId", "11");
 

// messageMap.setJMSCorrelationID("12345");

messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message 2" id="63612d85-24e7-4ea9-8396-03529f7e49f2"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS028-2-");
// messageMap.setStringProperty("conversationId", "123");
// messageMap.setStringProperty("refToMessageId", "11");
 

// messageMap.setJMSCorrelationID("12345");

messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="194f6818-5c18-46d4-b2ca-b015756fb4cb"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.verifyMessagePresence(0,0,"-DomJMS028-1-");
test.verifyMessagePresence(1,1,"-DomJMS028-2-");
test.finalize();</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageID("-DomJMS028-1-");
test.cleanDBMessageID("-DomJMS028-2-");
test.finalize();
ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:testSuite id="55753d1d-1880-4d33-a04a-5508cf33552c" name="Already disabled TCs" disabled="true"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS010-Submit Message-action-Unicity" searchProperties="true" id="ac5a9a8e-ed9d-4882-897a-2e65de77d811" disabled="true">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Submit Message" id="073502fb-b067-45ab-aa82-60b34e198caa"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS010-");
// messageMap.setStringProperty("conversationId", "123");
// messageMap.setStringProperty("refToMessageId", "11");
 

// messageMap.setJMSCorrelationID("12345");

messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="a670b8d8-4e51-4f7f-8d8f-eed29762cf63"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.verifyMessagePresence(0,0,"-DomJMS009-");
test.finalize();</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageID("-DomJMS010-");
test.finalize();
ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS019-Submit Message-refToMessageId-Unicity" searchProperties="true" id="2f2d8438-1ce7-4305-8960-ef1430019f0a" disabled="true">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Submit Message 1" id="a04f1794-5d37-4d26-aa00-cf81a2065c72"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS019-1-");
//messageMap.setStringProperty("conversationId", "123");
//messageMap.setStringProperty("refToMessageId", "11");
 

// messageMap.setJMSCorrelationID("12345");

messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message 2" id="628af4a7-5ceb-488d-94c1-876aff9653e0"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS019-2-");
//messageMap.setStringProperty("conversationId", "123");
messageMap.setStringProperty("refToMessageId", "-DomJMS018-1-");
 

// messageMap.setJMSCorrelationID("12345");

messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message 3" id="e094b6d9-2162-4039-8077-71491aab0b6e"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS019-3-");
//messageMap.setStringProperty("conversationId", "123");
// messageMap.setStringProperty("refToMessageId", "11");
 

// messageMap.setJMSCorrelationID("12345");

messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="2cd65051-c67e-4040-b9a3-bde3d50f61ba"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.verifyMessagePresence(1,1,"-DomJMS019-1-");
test.verifyMessagePresence(1,1,"-DomJMS019-2-");
test.verifyMessagePresence(1,1,"-DomJMS019-3-");
test.finalize();</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageIDStartsWith("-DomJMS019-1-")
test.finalize()
ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS022-Submit Message-agreementRef-Unicity" searchProperties="true" id="419dd011-afd2-4220-8396-ca8e9e714c87" disabled="true">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Submit Message" id="3e0c46a3-82a9-406d-8e16-c6cf07d17eb8"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS022-");
messageMap.setStringProperty("agreementRef", "messageAgreementRef");
 

// messageMap.setJMSCorrelationID("12345");

messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="669b215d-63dd-4e0f-80ad-04b1fcbf5e88"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.waitForStatus("ACKNOWLEDGED","DOWNLOADED","-DomJMS022-");
test.finalize();</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageID("-DomJMS022-");
test.finalize();
ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS027-Submit Message-fromRole-Unicity" searchProperties="true" id="c69e8042-4ab6-45b8-a0bc-a7b4962b0d8c" disabled="true">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Submit Message" id="30363808-c681-4183-8929-cec1ffca9bd1"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS027-");
// messageMap.setStringProperty("conversationId", "123");
// messageMap.setStringProperty("refToMessageId", "11");
 

// messageMap.setJMSCorrelationID("12345");

messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="5a4f857e-9def-466e-a257-81aea5c676f1"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.verifyMessagePresence(0,0,"-DomJMS027-");
test.finalize();</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageID("-DomJMS027-");
test.finalize();
ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS031-Submit Message-toRole-Unicity" searchProperties="true" id="2cac55fe-82c6-48ed-bd1f-08abc8046dfa" disabled="true">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Submit Message" id="26cf551c-6fc0-4366-9fe9-46a3a0e96664"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS031-");
// messageMap.setStringProperty("conversationId", "123");
// messageMap.setStringProperty("refToMessageId", "11");
 

// messageMap.setJMSCorrelationID("12345");

messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="1a77ac42-de02-41a8-8a87-97dd5bcea8a9"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.verifyMessagePresence(0,0,"-DomJMS031-");
test.finalize();</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageID("-DomJMS031-");
test.finalize();
ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS041-Submit Message-originalSender-Optional" searchProperties="true" id="6e23adae-7755-43cc-bb04-033612d16b56" disabled="true">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Submit Message 1" id="ab39f32b-5c5b-4f5c-8156-158512cff8eb"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
//messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS041-1-");


messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message 2" id="17181449-3631-45fb-b47e-1c72b8d23aad"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS041-2-");


messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="934d3629-ffd8-4492-aa10-1f70b844819f"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.verifyMessagePresence(1,1,"-DomJMS041-1-");
test.verifyMessagePresence(1,1,"-DomJMS041-2-");
test.finalize();</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageID("-DomJMS041-1-");
test.cleanDBMessageID("-DomJMS041-2-");
test.finalize();
ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS042-Submit Message-finalRecipient-Optional" searchProperties="true" id="7a969276-2be0-4f12-b9b9-fe3dfee53931" disabled="true">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Submit Message 1" id="75b5d404-56ec-479b-913a-eca9d3816b5f"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
//messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS042-1-");


messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message 2" id="b6a4a515-182c-4457-bf68-fe8910ff319d"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS042-2-");


messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="60ea5932-8f75-47a8-a295-b28fdba1d0b6"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.verifyMessagePresence(1,1,"-DomJMS042-1-");
test.verifyMessagePresence(1,1,"-DomJMS042-2-");
test.finalize();</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageID("-DomJMS042-1-");
test.cleanDBMessageID("-DomJMS042-2-");
test.finalize();
ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS053-Test Experience-Heavy Logs" searchProperties="true" id="a70f5dbc-b4e7-42d4-bcb2-33d03f03e5c6" disabled="true">
            <con:settings/>
            <con:testStep type="groovy" name="Start a load test" id="7c22c1e0-09ec-426b-95b1-973d31fb657d"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

def int i = 0;
while (i&lt;601){
	messageMap.setStringProperty("messageId", "-DomJMS053-"+i+"-");
	log.info "sending message";
	producer.send(messageMap);
	log.info "message sent";
	i=i+1;
	sleep(1000);
}

connection.close();</script></con:config></con:testStep>
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Test" id="2c35fd83-f603-4585-94ed-29800a1e4fc4"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
def int i = 0;
while (i&lt;201){
	test.verifyMessagePresence(1,1,"-DomJMS053-"+i+"-");
	i=i+1;
}
test.finalize();</script></con:config></con:testStep><con:testStep type="groovy" name="Check log file" id="315fe165-1010-43ee-ad05-858073f469c7"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Monitor the log file to check that its size did not increase widely."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDatabaseAll();
test.finalize();
ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>46a821e6-6caf-43f3-8f1e-fc16fd2acf61</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>90414ed1-d501-45a8-86b6-466a1352735c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cd8b9098-8fbd-42a9-8eb7-67404b5f59dd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>72f090b9-c1df-403b-be48-8ef3c9ecf20d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7ac680a1-b718-48cb-9143-8f9d5f804428</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3b40bbed-e32e-4914-9233-835456ba5072</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d4fc8565-27c9-4dcc-b3fb-4d74a19e13f7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>61b4d9bb-4e84-41fc-8693-38ddde563805</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>51f172b0-1579-4e33-8238-4f8fcde52724</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>191f2293-f259-4f91-b2f9-0ebb192b4853</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ceb3fbad-5f2d-4f54-b224-2fe362d97e90</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3ef6c6b6-6ed8-432c-a5bd-652673625532</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>17181449-3631-45fb-b47e-1c72b8d23aad</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>99884ca6-6750-4fc8-b686-65d6f4a7ad94</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>961097d1-6119-41d1-b47d-e81ac893b45e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b2f3cd3a-0dcd-4a96-bd04-ce3242432770</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1de195c0-a649-4eb4-bf92-90229ef44b7c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ef797b9a-5e4c-4aa5-8885-33701329e37b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>230c268d-d43f-41c8-bde9-41068936c667</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e51e438a-c563-46a9-a07d-cc69709a0291</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7009247c-334b-4900-96ce-ce3d24549fad</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4ada5e10-3044-4206-849d-d82681db0c51</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:testSuite id="3fe42b20-3f25-4edb-bfa8-b92fb44838b2" name="EDELIVERY-1386 - FallBack issue" disabled="true"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS011-Submit Message-action-FallBack" searchProperties="true" id="e449326b-0136-4276-ad0a-2424091814cb">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Update Default properties file" id="72f090b9-c1df-403b-be48-8ef3c9ecf20d"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Add line:\nAction = \"TC1Leg1\""); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message" id="84a8904a-c0fd-43e8-b7f5-ac968dc64269"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
//messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS011-");
// messageMap.setStringProperty("conversationId", "123");
// messageMap.setStringProperty("refToMessageId", "11");
 

// messageMap.setJMSCorrelationID("12345");

messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="897d745f-277f-4ec0-aedc-349d62613bee"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.verifyMessagePresence(1,1,"-DomJMS011-");
test.finalize();</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageID("-DomJMS011-");
test.finalize();
ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS013-Submit Message-Service-FallBack" searchProperties="true" id="4d356589-555c-4961-b57e-05238a4cc4bf">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Update Default properties file" id="906220c2-8277-4fcb-a3bd-f15306888b25"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Add line:\n Service = \"bdx:noprocess\""); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message" id="13f02d7e-5b1f-4cf0-9907-e5b263170dc4"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
//messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS013-");
// messageMap.setStringProperty("conversationId", "123");
// messageMap.setStringProperty("refToMessageId", "11");
 

// messageMap.setJMSCorrelationID("12345");

messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="1e085647-c118-47af-a15e-a7b13763ee54"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.verifyMessagePresence(1,1,"-DomJMS013-");
test.finalize();</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageID("-DomJMS013-");
test.finalize();
ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS016-Submit Message-serviceType-FallBack-service typed" searchProperties="true" id="06a13097-9d2e-406a-a3ca-5327fe4f8251">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Update Default properties file" id="7ac680a1-b718-48cb-9143-8f9d5f804428"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Add line:\n serviceType = \"tc1\""); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message" id="20080bd1-0b33-439d-9e24-6705a5375f75"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
//messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS016-");
// messageMap.setStringProperty("conversationId", "123");
// messageMap.setStringProperty("refToMessageId", "11");
 

// messageMap.setJMSCorrelationID("12345");

messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="3598dddf-43ad-4688-bb70-52f014d7fd24"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.verifyMessagePresence(1,1,"-DomJMS016-");
test.finalize();</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageID("-DomJMS016-");
test.finalize();
ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS021-Submit Message-agreementRef-FallBack" searchProperties="true" id="91f29f42-29ba-4db6-971d-44d6ac62d0de">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Update Default properties file" id="53c0a958-b619-493b-b45b-7b9d7ecf4e43"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Add line:\nAgreementRef = \"backUpAgreementRef\""); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message" id="f0b008b2-e122-4a68-901e-f0ed015a56f4"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS021-");
 

// messageMap.setJMSCorrelationID("12345");

messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="8079c92b-aa08-4e0b-b199-8c77a6f5edfc"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.waitForStatus("ACKNOWLEDGED","DOWNLOADED","-DomJMS021-");
test.finalize();</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageID("-DomJMS021-");
test.finalize();
ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS026-Submit Message-fromRole-FallBack" searchProperties="true" id="2fa15332-6081-42d2-b715-31d372e603a9">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Update Default properties file" id="39528860-d05b-4e06-963c-ab716f1edcbc"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Add line:\nfromRole = \"http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator\""); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message" id="655049bc-7954-402b-aca8-1e6e5fd1d0df"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
//messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS026-");
// messageMap.setStringProperty("conversationId", "123");
// messageMap.setStringProperty("refToMessageId", "11");
 

// messageMap.setJMSCorrelationID("12345");

messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="791d9681-0e7e-4866-8b86-fdca1590b093"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.verifyMessagePresence(1,1,"-DomJMS026-");
test.finalize();</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageID("-DomJMS026-");
test.finalize();
ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS030-Submit Message-toRole-FallBack" searchProperties="true" id="48c95389-5b0e-486e-b65f-1dc8e97b4445">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Update Default properties file" id="191f2293-f259-4f91-b2f9-0ebb192b4853"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Add line:\ntoRole = \"http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder\""); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message" id="4c45406d-2a0d-4ac8-a109-88feded44a45"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
//messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS030-");
// messageMap.setStringProperty("conversationId", "123");
// messageMap.setStringProperty("refToMessageId", "11");
 

// messageMap.setJMSCorrelationID("12345");

messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="1343362f-f6ca-4a6a-a9e3-5d8114a62628"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.verifyMessagePresence(1,1,"-DomJMS030-");
test.finalize();</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageID("-DomJMS030-");
test.finalize();
ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>39528860-d05b-4e06-963c-ab716f1edcbc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS033-Submit Message-fromPartyId-fallBack" searchProperties="true" id="94cb630b-3001-413b-838a-453f88de7cac">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Update Default properties file" id="ceb3fbad-5f2d-4f54-b224-2fe362d97e90"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Add line:\nfromPartyID = \"domibus-blue\""); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message" id="1cdf2aea-d972-49dd-a89c-4718f70adf18"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
//messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS033-");


messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="c47bc925-c3de-426c-9569-1d036895358e"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.verifyMessagePresence(1,1,"-DomJMS033-");
test.finalize();</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageID("-DomJMS033-");
test.finalize();
ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS035-Submit Message-fromPartyType-fallBack" searchProperties="true" id="167baf2c-1905-49c6-a3b1-eea7703c738a">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Update Default properties file" id="9357329a-fc5b-4873-8656-7d1a74fd299e"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Add line:\nfromPartyType = \"urn:oasis:names:tc:ebcore:partyid-type:unregistered\""); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message" id="98a67e92-919a-4dff-b8d0-8abb88625b2f"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
//messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS035-");


messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="81d56a4a-71c1-4835-acb4-265ee6e1a03e"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.verifyMessagePresence(1,1,"-DomJMS035-");
test.finalize();</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageID("-DomJMS035-");
test.finalize();
ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2c35fd83-f603-4585-94ed-29800a1e4fc4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS037-Submit Message-toPartyId-fallBack" searchProperties="true" id="bb050160-23a5-4c69-abad-d29f337d83a6">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Update Default properties file" id="3248bdaf-ac92-4470-b294-5edb209385df"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Add line:\ntoPartyID = \"domibus-red\""); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message" id="d1a02761-d557-40c1-adae-9c27391cc1f9"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
//messageMap.setStringProperty("toPartyId", "domibus-red");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS037-");


messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="2c68ece8-6846-4ede-8de0-0ec963e6824d"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.verifyMessagePresence(1,1,"-DomJMS037-");
test.finalize();</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageID("-DomJMS037-");
test.finalize();
ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomJMS039-Submit Message-toPartyType-fallBack" searchProperties="true" id="8273a842-f819-4ff0-a5ed-92c267ca4506">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Update Default properties file" id="d5a4e6dd-afe3-477e-b464-3ac2f1b8115f"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Add line:\ntoPartyType = \"urn:oasis:names:tc:ebcore:partyid-type:unregistered\""); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message" id="2faa7b97-8a50-4b49-9ebb-e0b97adc517f"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-red");
//messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-DomJMS039-");


messageMap.setStringProperty("totalNumberOfPayloads", "1");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload = pay1.getBytes();
messageMap.setBytes("payload_1", payload);

log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="0a56e196-6b5f-4fff-a5f1-d24bf7fb6fd4"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.verifyMessagePresence(1,1,"-DomJMS039-");
test.finalize();</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageID("-DomJMS039-");
test.finalize();
ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:requirements/><con:properties><con:property><con:name>localUrl</con:name><con:value>http://localhost:8080/domibus</con:value></con:property><con:property><con:name>remoteUrl</con:name><con:value>http://localhost:8180/domibus</con:value></con:property><con:property><con:name>pathExeSender</con:name><con:value>c:/domibus/sender/domibus/bin/</con:value></con:property><con:property><con:name>pathExeReceiver</con:name><con:value>c:/domibus/receiver/domibus/bin/</con:value></con:property><con:property><con:name>updateReport</con:name><con:value>true</con:value></con:property><con:property><con:name>databaseBlue</con:name><con:value>mysql</con:value></con:property><con:property><con:name>driverBlue</con:name><con:value>com.mysql.jdbc.Driver</con:value></con:property><con:property><con:name>jdbcUrlBlue</con:name><con:value>jdbc:mysql://localhost:3306/domibus_blue</con:value></con:property><con:property><con:name>blueDbUser</con:name><con:value>root</con:value></con:property><con:property><con:name>blueDbPassword</con:name><con:value>adminroot</con:value></con:property><con:property><con:name>databaseRed</con:name><con:value>mysql</con:value></con:property><con:property><con:name>driverRed</con:name><con:value>com.mysql.jdbc.Driver</con:value></con:property><con:property><con:name>jdbcUrlRed</con:name><con:value>jdbc:mysql://localhost:3306/domibus_red</con:value></con:property><con:property><con:name>redDbUser</con:name><con:value>root</con:value></con:property><con:property><con:name>redDbPassword</con:name><con:value>adminroot</con:value></con:property><con:property><con:name>pathExeGreen</con:name><con:value>c:/domibus/greenReceiver/domibus/bin/</con:value></con:property><con:property><con:name>jdbcUrl3</con:name><con:value>jdbc:mysql://localhost:3306/domibus_green</con:value></con:property><con:property><con:name>greenUrl</con:name><con:value>http://localhost:8280</con:value></con:property><con:property><con:name>reportFilePath</con:name><con:value>${projectDir}\\reports\\Domibus_3_2_5_test_results.xlsx</con:value></con:property><con:property><con:name>pdfAttachment</con:name><con:value>C:/SoapUIProjects/sampleFiles/fileSmall.pdf</con:value></con:property><con:property><con:name>specialPModesPath</con:name><con:value>${projectDir}\\resources\\PModesandKeystoresSpecialTests</con:value></con:property><con:property><con:name>defaultPModesPath</con:name><con:value>${projectDir}\\resources\\PModesandKeystoresDefault</con:value></con:property></con:properties><con:wssContainer/><con:databaseConnectionContainer/><con:oAuth2ProfileContainer/><con:oAuth1ProfileContainer/><con:reporting><con:reportTemplates/><con:xmlTemplates/><con:parameters/></con:reporting><con:sensitiveInformation/></con:soapui-project>